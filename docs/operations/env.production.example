# Production Environment Configuration Template
# Copy these into your deployment platform with real values

# === CORE APPLICATION ===
FLASK_ENV=production
APP_BASE_URL=https://app.batchtrack.com
APP_HOST=app.batchtrack.com
FLASK_SECRET_KEY=your-secret-key-here-must-be-32-chars-minimum
# === DATABASE (baseline for ~90-user load tests) ===
DATABASE_INTERNAL_URL=postgresql://user:password@internal-host:5432/batchtrack_prod
# DATABASE_URL=postgresql://user:password@public-host:5432/batchtrack_prod
SQLALCHEMY_POOL_SIZE=20
SQLALCHEMY_MAX_OVERFLOW=20
SQLALCHEMY_POOL_RECYCLE=1800
SQLALCHEMY_POOL_TIMEOUT=45
SQLALCHEMY_POOL_USE_LIFO=true
SQLALCHEMY_POOL_RESET_ON_RETURN=commit

# === REDIS (Required for production rate limiting, caching, and sessions) ===
REDIS_URL=redis://your-redis-host:6379/0
RATELIMIT_STORAGE_URI=${REDIS_URL}
RATELIMIT_STORAGE_URL=${REDIS_URL}
SESSION_TYPE=redis
SESSION_LIFETIME_MINUTES=60
CACHE_TYPE=RedisCache
CACHE_REDIS_URL=${REDIS_URL}
CACHE_DEFAULT_TIMEOUT=120
# REDIS_MAX_CONNECTIONS=225
# REDIS_POOL_MAX_CONNECTIONS=50
REDIS_POOL_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECT_TIMEOUT=5

# === RATE LIMITING ===
RATELIMIT_ENABLED=true
RATELIMIT_DEFAULT="5000 per hour;1000 per minute"

# === BILLING CACHE ===
BILLING_CACHE_ENABLED=true
BILLING_GATE_CACHE_TTL_SECONDS=60

# === LOAD TEST USERS (Locust) ===
LOCUST_USER_BASE=loadtest_user
LOCUST_USER_PASSWORD=loadtest123
LOCUST_USER_COUNT=5000
LOCUST_CACHE_TTL=120
LOCUST_REQUIRE_HTTPS=1
LOCUST_LOG_LOGIN_FAILURE_CONTEXT=1
# LOCUST_USER_CREDENTIALS=[{"username":"loadtest_user1","password":"loadtest123"}]

# === GUNICORN SERVER (adjust as you scale) ===
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=gevent
GUNICORN_WORKER_CONNECTIONS=1000
GUNICORN_TIMEOUT=30
GUNICORN_KEEPALIVE=2
GUNICORN_MAX_REQUESTS=2000

# === EMAIL ===
MAIL_SERVER=smtp.your-provider.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your-email@domain.com
MAIL_PASSWORD=your-email-password
MAIL_DEFAULT_SENDER=noreply@batchtrack.app

# === STRIPE ===
STRIPE_PUBLISHABLE_KEY=pk_live_your_key_here
STRIPE_SECRET_KEY=sk_live_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# === MONITORING ===
LOG_LEVEL=INFO
SENTRY_DSN=https://your-sentry-dsn-here

# === SECURITY ===
WTF_CSRF_TIME_LIMIT=3600
