2025-08-25 19:18:26,459 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:26,466 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:26,468 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:26,471 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:26,473 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:26,498 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:27,948 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:28,030 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:28,236 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:39,237 INFO: ADJUST INVENTORY - Item: Apples (ID: 1) [in /home/runner/workspace/app/blueprints/inventory/routes.py:249]
2025-08-25 19:18:39,237 INFO: CENTRAL DELEGATOR: item_id=1, qty=100.0, type=restock [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:26]
2025-08-25 19:18:39,246 INFO: DELEGATING: initial_stock -> routing to operation module [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:138]
2025-08-25 19:18:39,247 INFO: ROUTING: initial_stock -> INITIAL_STOCK (additive special case) [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:207]
2025-08-25 19:18:39,247 INFO: RESTOCK: Processing 100.0 for item 1 [in /home/runner/workspace/app/services/inventory_adjustment/_additive_ops.py:43]
2025-08-25 19:18:39,248 INFO: RESTOCK: Classified as lot_creation operation [in /home/runner/workspace/app/services/inventory_adjustment/_additive_ops.py:50]
2025-08-25 19:18:39,248 INFO: LOT_CREATION: Adding 100.0 to item 1 [in /home/runner/workspace/app/services/inventory_adjustment/_additive_ops.py:114]
2025-08-25 19:18:39,253 INFO: FIFO: Created lot LOT-B4NL1DC with 100.0 count for item 1 (perishable: True) [in /home/runner/workspace/app/services/inventory_adjustment/_fifo_ops.py:159]
2025-08-25 19:18:39,254 INFO: LOT_CREATION SUCCESS: Will add 100.0 to item 1 [in /home/runner/workspace/app/services/inventory_adjustment/_additive_ops.py:137]
2025-08-25 19:18:39,254 INFO: RESTOCK SUCCESS: Will increase item 1 by 100.0 [in /home/runner/workspace/app/services/inventory_adjustment/_additive_ops.py:99]
2025-08-25 19:18:39,254 INFO: QUANTITY UPDATE: Item 1 quantity 150.0 + 100.0 = 250.0 [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:96]
2025-08-25 19:18:39,335 INFO: SUCCESS: restock completed for item 1 (FIFO validated) [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:120]
2025-08-25 19:18:39,336 INFO: Adjustment successful: Restocked 100.0 count [in /home/runner/workspace/app/blueprints/inventory/routes.py:296]
2025-08-25 19:18:39,409 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:39,439 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:39,443 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:53,455 INFO: EDIT INVENTORY - Item: Apples (ID: 1) [in /home/runner/workspace/app/blueprints/inventory/routes.py:326]
2025-08-25 19:18:53,456 INFO: QUANTITY RECOUNT: Target quantity 150.0 for item Apples [in /home/runner/workspace/app/blueprints/inventory/routes.py:335]
2025-08-25 19:18:53,456 INFO: CENTRAL DELEGATOR: item_id=1, qty=150.0, type=recount [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:26]
2025-08-25 19:18:53,458 INFO: DELEGATING: recount -> routing to operation module [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:138]
2025-08-25 19:18:53,458 INFO: ROUTING: recount -> RECOUNT (special) [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:173]
2025-08-25 19:18:53,458 INFO: RECOUNT: Item 1 current=250.0, target=150.0, delta=-100.0 [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:93]
2025-08-25 19:18:53,458 INFO: RECOUNT: Deducting 100.0 using recount-specific FIFO drainage [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:108]
2025-08-25 19:18:53,461 INFO: RECOUNT DEDUCT: Consumed 50.0 from lot 1 (TEST-1-2-10) [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:160]
2025-08-25 19:18:53,462 INFO: RECOUNT DEDUCT: Consumed 50.0 from lot 2 (TEST-1-2-2) [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:160]
2025-08-25 19:18:53,462 INFO: RECOUNT DEDUCT SUCCESS: Affected 2 lots [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:162]
2025-08-25 19:18:53,462 INFO: RECOUNT COMPLETE: Item 1 FIFO reconciled for target 150.0 [in /home/runner/workspace/app/services/inventory_adjustment/_special_ops.py:240]
2025-08-25 19:18:53,462 INFO: RECOUNT: Item 1 quantity 250.0 -> 150.0 [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:100]
2025-08-25 19:18:53,481 INFO: SUCCESS: recount completed for item 1 (FIFO validated) [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:120]
2025-08-25 19:18:53,481 INFO: RECOUNT SUCCESS: Inventory recounted to 150.0 [in /home/runner/workspace/app/blueprints/inventory/routes.py:351]
2025-08-25 19:18:53,565 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:53,600 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:18:53,611 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:25:09,768 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-25 19:25:29,060 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-25 19:25:31,570 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-25 19:25:32,107 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:25:38,947 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-25 19:25:48,428 INFO: PRODUCTION_PLANNING: Starting analysis for recipe Milk and Honey Mixture at scale 1.0 [in /home/runner/workspace/app/services/production_planning/_core.py:71]
2025-08-25 19:25:48,428 INFO: STOCK_VALIDATION: Checking ingredients for recipe 4 at scale 1.0 [in /home/runner/workspace/app/services/production_planning/_stock_validation.py:27]
2025-08-25 19:25:48,486 ERROR: Error validating ingredients with USCS: 'StockStatus' object has no attribute 'upper' [in /home/runner/workspace/app/services/production_planning/_stock_validation.py:81]
2025-08-25 19:25:48,486 ERROR: Error in comprehensive production planning: 'StockStatus' object has no attribute 'upper' [in /home/runner/workspace/app/services/production_planning/_core.py:59]
2025-08-25 19:25:54,865 INFO: CONTAINER_FILL: Calculating strategy for recipe 4, scale 1.0, yield 500.0 ml [in /home/runner/workspace/app/services/production_planning/_container_management.py:242]
2025-08-25 19:25:54,868 INFO: CONTAINER_FILL: Recipe allowed containers: [] [in /home/runner/workspace/app/services/production_planning/_container_management.py:248]
2025-08-25 19:25:54,869 INFO: CONTAINER_FILL: Found 3 total containers (no restrictions) [in /home/runner/workspace/app/services/production_planning/_container_management.py:263]
2025-08-25 19:25:54,890 INFO: CONTAINER_FILL: Container 13 (Paper Plates (5-pack)) attributes: ['available_quantity', 'batch_usages', 'category', 'category_id', 'cost_per_unit', 'created_at', 'created_by', 'density', 'expiration_date', 'expired_quantity', 'extra_batch_usages', 'history', 'id', 'intermediate', 'is_active', 'is_archived', 'is_perishable', 'lots', 'low_stock_threshold', 'metadata', 'name', 'organization', 'organization_id', 'product_history_entries', 'product_sku', 'quantity', 'query', 'recipe_usages', 'registry', 'shelf_life_days', 'storage_amount', 'storage_unit', 'type', 'unified_history', 'unit'] [in /home/runner/workspace/app/services/production_planning/_container_management.py:267]
2025-08-25 19:25:54,896 INFO: CONTAINER_FILL: Container 11 (Glass 4oz Jars) attributes: ['available_quantity', 'batch_usages', 'category', 'category_id', 'cost_per_unit', 'created_at', 'created_by', 'density', 'expiration_date', 'expired_quantity', 'extra_batch_usages', 'history', 'id', 'intermediate', 'is_active', 'is_archived', 'is_perishable', 'lots', 'low_stock_threshold', 'metadata', 'name', 'organization', 'organization_id', 'product_history_entries', 'product_sku', 'quantity', 'query', 'recipe_usages', 'registry', 'shelf_life_days', 'storage_amount', 'storage_unit', 'type', 'unified_history', 'unit'] [in /home/runner/workspace/app/services/production_planning/_container_management.py:267]
2025-08-25 19:25:54,902 INFO: CONTAINER_FILL: Container 12 (Glass 10oz Jars) attributes: ['available_quantity', 'batch_usages', 'category', 'category_id', 'cost_per_unit', 'created_at', 'created_by', 'density', 'expiration_date', 'expired_quantity', 'extra_batch_usages', 'history', 'id', 'intermediate', 'is_active', 'is_archived', 'is_perishable', 'lots', 'low_stock_threshold', 'metadata', 'name', 'organization', 'organization_id', 'product_history_entries', 'product_sku', 'quantity', 'query', 'recipe_usages', 'registry', 'shelf_life_days', 'storage_amount', 'storage_unit', 'type', 'unified_history', 'unit'] [in /home/runner/workspace/app/services/production_planning/_container_management.py:267]
2025-08-25 19:25:54,902 INFO: CONTAINER_FILL: Container Paper Plates (5-pack) - capacity: 0 ml, stock: 10.0 [in /home/runner/workspace/app/services/production_planning/_container_management.py:287]
