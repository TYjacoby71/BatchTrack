2025-07-11 20:13:35,655 ERROR: ValueError in SKU inventory adjustment: Inventory adjustment failed validation: SYNC ERROR: Admin Apple Sauce - Base - Bulk inventory (52.0) != FIFO total (54.0) [includes frozen expired] [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:223]
2025-07-11 20:13:35,656 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:235]
2025-07-11 20:13:35,657 INFO: Redirecting to SKU view: 3 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:237]
2025-07-11 20:14:02,032 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:14:08,173 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:14:09,002 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:16:17,822 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:16:22,608 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:16:23,313 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:17:48,199 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:17:51,812 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:17:52,603 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-11 20:19:43,453 ERROR: Error marking item as expired: Inventory adjustment failed validation: SYNC ERROR: Admin Apple Sauce - Base - Bulk inventory (51.0) != FIFO total (53.0) [includes frozen expired] [in /home/runner/workspace/app/blueprints/expiration/services.py:492]
2025-07-11 20:19:52,161 ERROR: Error marking item as expired: Inventory adjustment failed validation: SYNC ERROR: Admin Apple Sauce - Base - Bulk inventory (50.0) != FIFO total (52.0) [includes frozen expired] [in /home/runner/workspace/app/blueprints/expiration/services.py:492]
2025-07-11 20:21:19,497 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-11 20:21:19,497 INFO: Inventory Item ID: 3 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-11 20:21:19,498 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-11 20:21:19,498 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-11 20:21:19,498 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-11 20:21:19,498 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-11 20:21:19,500 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-11 20:21:19,500 INFO: SKU details - inventory_item_id: 3, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-11 20:21:19,501 INFO: SKU inventory item: <InventoryItem 3> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-11 20:21:19,501 INFO: Current inventory quantity: 50.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-11 20:21:19,501 INFO: Form request data: {'csrf_token': 'ImUyYjY5MzZmMTkzMWM4M2MzNjM3MWRkNDNjZDE4NmQ3NTQ1MjQ5MTUi.aHFyKw.er03lJYlrvjg58ajbF9_-whtabI', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '52', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-11 20:21:19,501 INFO: Extracted quantity: 52 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-11 20:21:19,501 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-11 20:21:19,501 INFO: Converting quantity '52' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-11 20:21:19,502 INFO: Converted quantity: 52.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-11 20:21:19,502 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-11 20:21:19,502 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-11 20:21:19,502 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:115]
2025-07-11 20:21:19,502 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:116]
2025-07-11 20:21:19,502 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:117]
2025-07-11 20:21:19,502 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:118]
2025-07-11 20:21:19,503 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:119]
2025-07-11 20:21:19,503 INFO: === USING DIRECT FIFO RECOUNT (like raw inventory) === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:137]
2025-07-11 20:21:19,503 INFO: Recounting inventory item 3 to 52.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:138]
2025-07-11 20:21:19,567 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:235]
2025-07-11 20:21:19,568 INFO: Redirecting to SKU view: 3 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:237]
2025-07-11 20:21:29,894 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-11 20:21:29,894 INFO: Inventory Item ID: 3 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-11 20:21:29,895 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-11 20:21:29,895 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-11 20:21:29,895 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-11 20:21:29,895 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-11 20:21:29,897 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-11 20:21:29,897 INFO: SKU details - inventory_item_id: 3, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-11 20:21:29,897 INFO: SKU inventory item: <InventoryItem 3> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-11 20:21:29,897 INFO: Current inventory quantity: 52.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-11 20:21:29,898 INFO: Form request data: {'csrf_token': 'ImUyYjY5MzZmMTkzMWM4M2MzNjM3MWRkNDNjZDE4NmQ3NTQ1MjQ5MTUi.aHFyPw.V9A25chEzTuFWdkyHc28a8qYyDg', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'sale', 'quantity': '1', 'notes': '', 'order_id': '', 'sale_price': '10.0', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-11 20:21:29,898 INFO: Extracted quantity: 1 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-11 20:21:29,898 INFO: Extracted change_type: sale [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-11 20:21:29,898 INFO: Converting quantity '1' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-11 20:21:29,898 INFO: Converted quantity: 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-11 20:21:29,899 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-11 20:21:29,899 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-11 20:21:29,899 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:115]
2025-07-11 20:21:29,899 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:116]
2025-07-11 20:21:29,899 INFO:   - sale_price: 10.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:117]
2025-07-11 20:21:29,899 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:118]
2025-07-11 20:21:29,899 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:119]
2025-07-11 20:21:29,900 INFO: === CALLING CENTRALIZED INVENTORY ADJUSTMENT === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:185]
2025-07-11 20:21:29,900 INFO: Parameters: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:186]
2025-07-11 20:21:29,900 INFO:   - item_id (inventory_item_id): 3 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:187]
2025-07-11 20:21:29,900 INFO:   - quantity: 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:188]
