2025-07-07 22:16:40,276 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-07 22:16:40,280 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:31]
2025-07-07 22:16:40,280 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:33]
2025-07-07 22:16:40,281 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-07 22:16:40,281 INFO: Current inventory quantity: 11.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:36]
2025-07-07 22:16:40,281 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aGxHMw.2bysTU81nNb-N17M6zj79WqUVho', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '2', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:53]
2025-07-07 22:16:40,282 INFO: Extracted quantity: 2 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:59]
2025-07-07 22:16:40,282 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-07 22:16:40,282 INFO: Converting quantity '2' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:86]
2025-07-07 22:16:40,282 INFO: Converted quantity: 2.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:88]
2025-07-07 22:16:40,282 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:102]
2025-07-07 22:16:40,283 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:103]
2025-07-07 22:16:40,283 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:104]
2025-07-07 22:16:40,283 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:105]
2025-07-07 22:16:40,283 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:106]
2025-07-07 22:16:40,283 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:107]
2025-07-07 22:16:40,284 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:108]
2025-07-07 22:16:40,284 INFO: === CALLING CENTRALIZED INVENTORY ADJUSTMENT === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:125]
2025-07-07 22:16:40,284 INFO: Parameters: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:126]
2025-07-07 22:16:40,284 INFO:   - item_id (inventory_item_id): 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:127]
2025-07-07 22:16:40,284 INFO:   - quantity: 2.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:128]
2025-07-07 22:16:40,285 INFO:   - change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:129]
2025-07-07 22:16:40,285 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:130]
2025-07-07 22:16:40,285 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:131]
2025-07-07 22:16:40,285 INFO:   - created_by: 2 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:132]
2025-07-07 22:16:40,285 INFO:   - item_type: product [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:133]
2025-07-07 22:16:40,286 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:134]
2025-07-07 22:16:40,286 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:135]
2025-07-07 22:16:40,286 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:136]
2025-07-07 22:16:40,286 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:137]
2025-07-07 22:16:40,286 INFO:   - custom_expiration_date: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:138]
2025-07-07 22:16:40,287 INFO:   - custom_shelf_life_days: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:139]
2025-07-07 22:16:40,288 ERROR: ValueError in SKU inventory adjustment: Insufficient fresh FIFO stock (expired lots frozen) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:196]
2025-07-07 22:16:40,288 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:210]
2025-07-07 22:16:40,288 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:212]
2025-07-07 22:16:46,825 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:18]
2025-07-07 22:16:46,826 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-07 22:16:46,826 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-07 22:16:46,826 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-07 22:16:46,826 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-07 22:16:46,826 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-07 22:16:46,828 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:31]
2025-07-07 22:16:46,828 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:33]
2025-07-07 22:16:46,829 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-07 22:16:46,829 INFO: Current inventory quantity: 11.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:36]
2025-07-07 22:16:46,829 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aGxHSA.EjfQ3Jwqc8la6a8ow-4HyWQbXy0', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '5', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:53]
2025-07-07 22:16:46,829 INFO: Extracted quantity: 5 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:59]
2025-07-07 22:16:46,830 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-07 22:16:46,830 INFO: Converting quantity '5' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:86]
2025-07-07 22:16:46,830 INFO: Converted quantity: 5.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:88]
2025-07-07 22:16:46,830 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:102]
2025-07-07 22:16:46,830 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:103]
2025-07-07 22:16:46,830 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:104]
2025-07-07 22:16:46,830 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:105]
2025-07-07 22:16:46,830 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:106]
2025-07-07 22:16:46,831 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:107]
2025-07-07 22:16:46,831 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:108]
2025-07-07 22:16:46,831 INFO: === CALLING CENTRALIZED INVENTORY ADJUSTMENT === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:125]
2025-07-07 22:16:46,831 INFO: Parameters: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:126]
2025-07-07 22:16:46,831 INFO:   - item_id (inventory_item_id): 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:127]
2025-07-07 22:16:46,831 INFO:   - quantity: 5.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:128]
2025-07-07 22:16:46,831 INFO:   - change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:129]
2025-07-07 22:16:46,831 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:130]
2025-07-07 22:16:46,832 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:131]
2025-07-07 22:16:46,832 INFO:   - created_by: 2 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:132]
2025-07-07 22:16:46,832 INFO:   - item_type: product [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:133]
2025-07-07 22:16:46,832 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:134]
2025-07-07 22:16:46,832 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:135]
