2025-07-07 23:19:38,248 ERROR: ValueError in SKU inventory adjustment: Inventory adjustment failed validation: SYNC ERROR: Admin Apple Sauce - Base - Bulk inventory (4.0) != FIFO total (15.0) [includes frozen expired] [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:210]
2025-07-07 23:19:38,249 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:222]
2025-07-07 23:19:38,249 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:224]
2025-07-07 23:19:52,990 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-07 23:19:52,991 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-07 23:19:52,991 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-07 23:19:52,991 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-07 23:19:52,991 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-07 23:19:52,991 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-07 23:19:52,993 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-07 23:19:52,994 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-07 23:19:52,994 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-07 23:19:52,994 INFO: Current inventory quantity: 4.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-07 23:19:52,995 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aGxWEQ.ALPD_ttlBj0O5SHiF8GCNUxWMAo', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '0', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-07 23:19:52,995 INFO: Extracted quantity: 0 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-07 23:19:52,995 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-07 23:19:52,995 INFO: Converting quantity '0' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-07 23:19:52,995 INFO: Converted quantity: 0.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-07 23:19:52,995 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:103]
2025-07-07 23:19:52,996 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:104]
2025-07-07 23:19:52,996 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:105]
2025-07-07 23:19:52,996 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:106]
2025-07-07 23:19:52,996 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:107]
2025-07-07 23:19:52,997 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:108]
2025-07-07 23:19:52,997 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:109]
2025-07-07 23:19:52,997 INFO: === USING DIRECT FIFO RECOUNT (like raw inventory) === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:127]
2025-07-07 23:19:52,997 INFO: Recounting inventory item 4 to 0.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:128]
2025-07-07 23:19:53,054 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:222]
2025-07-07 23:19:53,054 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:224]
2025-07-07 23:20:21,866 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:20:25,709 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:20:26,500 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:20:58,360 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-07 23:20:58,361 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-07 23:20:58,361 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-07 23:20:58,362 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-07 23:20:58,362 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-07 23:20:58,363 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-07 23:20:58,365 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-07 23:20:58,365 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-07 23:20:58,367 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-07 23:20:58,367 INFO: Current inventory quantity: 0.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-07 23:20:58,367 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aGxWSg.kcbrE3EelTDuq_kWUWa_znF6bkg', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '1', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-07 23:20:58,367 INFO: Extracted quantity: 1 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-07 23:20:58,367 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-07 23:20:58,368 INFO: Converting quantity '1' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-07 23:20:58,368 INFO: Converted quantity: 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-07 23:20:58,368 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:108]
2025-07-07 23:20:58,368 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:109]
2025-07-07 23:20:58,368 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:110]
2025-07-07 23:20:58,368 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:111]
2025-07-07 23:20:58,369 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:112]
2025-07-07 23:20:58,369 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-07 23:20:58,369 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-07 23:20:58,369 INFO: === USING DIRECT FIFO RECOUNT (like raw inventory) === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:132]
2025-07-07 23:20:58,369 INFO: Recounting inventory item 4 to 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:133]
2025-07-07 23:20:58,468 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:227]
2025-07-07 23:20:58,468 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:229]
2025-07-07 23:27:22,478 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:27:29,098 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:27:29,947 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-07 23:27:43,488 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-07 23:27:43,488 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-07 23:27:43,488 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-07 23:27:43,489 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-07 23:27:43,489 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-07 23:27:43,489 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
