2025-08-18 22:17:55,495 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:55,519 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:55,519 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:56,992 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:56,992 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:57,016 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:57,016 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:57,016 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:58,490 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:58,490 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:58,490 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:17:58,513 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:58,513 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:58,513 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:17:58,513 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:18:00,214 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:18:00,214 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:18:00,214 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:18:00,214 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:18:00,232 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:18:00,232 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:18:00,232 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:18:00,232 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:18:00,232 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:33:40,305 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:33:59,869 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:34:01,623 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:34:01,842 INFO: Getting global unit list [in /home/runner/workspace/app/utils/unit_utils.py:32]
2025-08-18 22:42:36,070 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:42:37,709 INFO: Blueprint 'billing' registered successfully. [in /home/runner/workspace/app/blueprints_registry.py:123]
2025-08-18 22:42:37,711 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:42:37,711 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:28]
2025-08-18 22:42:39,259 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=100.0, change_type=restock, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
2025-08-18 22:42:39,259 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=100.0, change_type=restock, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
2025-08-18 22:42:39,271 INFO: INITIAL STOCK: Detected item 1 has no FIFO history, delegating to creation logic [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:46]
2025-08-18 22:42:39,271 INFO: INITIAL STOCK: Detected item 1 has no FIFO history, delegating to creation logic [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:46]
2025-08-18 22:42:39,286 INFO: FIFO: Updating inventory item 1 quantity: 0.0 → 100.0 [in /home/runner/workspace/app/services/inventory_adjustment/_fifo_ops.py:237]
2025-08-18 22:42:39,286 INFO: FIFO: Updating inventory item 1 quantity: 0.0 → 100.0 [in /home/runner/workspace/app/services/inventory_adjustment/_fifo_ops.py:237]
2025-08-18 22:42:39,311 INFO: Recorded audit entry for item 1: initial_stock [in /home/runner/workspace/app/services/inventory_adjustment/_audit.py:102]
2025-08-18 22:42:39,311 INFO: Recorded audit entry for item 1: initial_stock [in /home/runner/workspace/app/services/inventory_adjustment/_audit.py:102]
2025-08-18 22:42:39,328 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=50.0, change_type=restock, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
2025-08-18 22:42:39,328 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=50.0, change_type=restock, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
2025-08-18 22:42:39,330 INFO: FIFO: Updating inventory item 1 quantity: 100.0 → 150.0 [in /home/runner/workspace/app/services/inventory_adjustment/_fifo_ops.py:237]
2025-08-18 22:42:39,330 INFO: FIFO: Updating inventory item 1 quantity: 100.0 → 150.0 [in /home/runner/workspace/app/services/inventory_adjustment/_fifo_ops.py:237]
2025-08-18 22:42:39,353 ERROR: Failed to record audit entry for item 1: (builtins.ValueError) could not convert string to float: 'Second batch'
[SQL: INSERT INTO unified_inventory_history (inventory_item_id, timestamp, change_type, quantity_change, unit, unit_cost, remaining_quantity, fifo_reference_id, fifo_code, batch_id, created_by, notes, quantity_used, used_for_batch_id, is_perishable, shelf_life_days, expiration_date, location_id, location_name, temperature_at_time, quality_status, compliance_status, quality_checked_by, customer, sale_price, order_id, reservation_id, is_reserved, sale_location, marketplace_order_id, marketplace_source, batch_number, lot_number, container_id, fifo_source, organization_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: [{'remaining_quantity': 0.0, 'organization_id': 3, 'quantity_change': 'Second batch', 'timestamp': datetime.datetime(2025, 8, 18, 22, 42, 39, 352356),  ... (513 characters truncated) ... _price': None, 'fifo_reference_id': None, 'quality_checked_by': None, 'created_by': None, 'batch_id': None, 'customer': None, 'shelf_life_days': None}]] [in /home/runner/workspace/app/services/inventory_adjustment/_audit.py:107]
2025-08-18 22:42:39,353 ERROR: Failed to record audit entry for item 1: (builtins.ValueError) could not convert string to float: 'Second batch'
[SQL: INSERT INTO unified_inventory_history (inventory_item_id, timestamp, change_type, quantity_change, unit, unit_cost, remaining_quantity, fifo_reference_id, fifo_code, batch_id, created_by, notes, quantity_used, used_for_batch_id, is_perishable, shelf_life_days, expiration_date, location_id, location_name, temperature_at_time, quality_status, compliance_status, quality_checked_by, customer, sale_price, order_id, reservation_id, is_reserved, sale_location, marketplace_order_id, marketplace_source, batch_number, lot_number, container_id, fifo_source, organization_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: [{'remaining_quantity': 0.0, 'organization_id': 3, 'quantity_change': 'Second batch', 'timestamp': datetime.datetime(2025, 8, 18, 22, 42, 39, 352356),  ... (513 characters truncated) ... _price': None, 'fifo_reference_id': None, 'quality_checked_by': None, 'created_by': None, 'batch_id': None, 'customer': None, 'shelf_life_days': None}]] [in /home/runner/workspace/app/services/inventory_adjustment/_audit.py:107]
2025-08-18 22:42:39,370 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=-75.0, change_type=batch, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
2025-08-18 22:42:39,370 INFO: CANONICAL INVENTORY ADJUSTMENT: item_id=1, quantity=-75.0, change_type=batch, caller=tests/test_inventory_fifo.py:test_fifo_deduction_order [in /home/runner/workspace/app/services/inventory_adjustment/_core.py:33]
