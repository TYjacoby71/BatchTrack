2025-07-08 23:15:33,389 INFO:   - created_by: 2 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:302]
2025-07-08 23:15:33,392 INFO:   - item_type: product [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:303]
2025-07-08 23:15:33,392 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:304]
2025-07-08 23:15:33,392 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:305]
2025-07-08 23:15:33,392 INFO:   - order_id: 1202 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:306]
2025-07-08 23:15:33,392 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:307]
2025-07-08 23:15:33,392 INFO:   - custom_expiration_date: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:308]
2025-07-08 23:15:33,393 INFO:   - custom_shelf_life_days: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:309]
2025-07-08 23:15:33,557 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:345]
2025-07-08 23:15:33,557 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:347]
2025-07-08 23:15:50,174 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-08 23:15:50,175 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-08 23:15:50,175 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-08 23:15:50,175 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-08 23:15:50,175 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-08 23:15:50,175 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-08 23:15:50,177 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-08 23:15:50,177 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-08 23:15:50,178 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-08 23:15:50,178 INFO: Current inventory quantity: 9.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-08 23:15:50,178 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aG2mlQ.sAzC1FfSfOCAeq6aAZJ0nJ9aWJw', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'unreserved', 'quantity': '', 'notes': '', 'order_id': '1202', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-08 23:15:50,178 INFO: Extracted quantity:  (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-08 23:15:50,178 INFO: Extracted change_type: unreserved [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-08 23:15:50,178 INFO: Empty quantity detected. Change type: unreserved [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:65]
2025-07-08 23:15:50,179 ERROR: Quantity validation failed: Quantity is required [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:71]
2025-07-08 23:16:31,332 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 23:16:32,136 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 23:18:02,286 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 23:18:03,012 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 23:18:32,077 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-08 23:18:32,077 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-08 23:18:32,078 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-08 23:18:32,078 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-08 23:18:32,078 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-08 23:18:32,078 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-08 23:18:32,080 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-08 23:18:32,080 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-08 23:18:32,081 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-08 23:18:32,081 INFO: Current inventory quantity: 9.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-08 23:18:32,081 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aG2nOw.vbDlTdj5YslPliHve1seluWnzfg', 'change_type': 'recount', 'available_quantity': '0', 'reserved_quantity': '0', 'notes': ''} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-08 23:18:32,081 INFO: Extracted quantity: None (type: <class 'NoneType'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-08 23:18:32,081 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-08 23:18:32,081 INFO: Empty quantity detected. Change type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:65]
2025-07-08 23:18:32,082 INFO: Set quantity to 0 for recount operation [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:68]
2025-07-08 23:18:32,082 INFO: Converting quantity '0' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-08 23:18:32,082 INFO: Converted quantity: 0.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-08 23:18:32,082 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-08 23:18:32,082 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-08 23:18:32,082 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:115]
2025-07-08 23:18:32,082 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:116]
2025-07-08 23:18:32,083 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:117]
2025-07-08 23:18:32,083 INFO:   - order_id: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:118]
2025-07-08 23:18:32,083 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:119]
2025-07-08 23:18:32,083 INFO: === DUAL RECOUNT: Available + Reserved === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:209]
2025-07-08 23:18:32,083 INFO: Recounting inventory item 4: 0.0 available, 0.0 reserved [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:215]
2025-07-08 23:18:32,086 ERROR: Exception in SKU inventory adjustment: Error adjusting inventory: cannot access local variable 'FIFOService' where it is not associated with a value [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:338]
2025-07-08 23:18:32,086 ERROR: Full traceback: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:339]
Traceback (most recent call last):
  File "/home/runner/workspace/app/blueprints/products/product_inventory_routes.py", line 251, in adjust_sku_inventory
    FIFOService.add_fifo_entry(
    ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'FIFOService' where it is not associated with a value
2025-07-08 23:18:32,087 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:345]
2025-07-08 23:18:32,087 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:347]
2025-07-08 23:19:04,687 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-08 23:19:04,687 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-08 23:19:04,687 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-08 23:19:04,688 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-08 23:19:04,688 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-08 23:19:04,688 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
