2025-07-08 21:21:02,396 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-08 21:21:02,401 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-08 21:21:02,401 INFO: Current inventory quantity: 10.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-08 21:21:02,402 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aG2Lpw.E2HxgOWzyUfJGGasFuAG0f7_SWA', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'reserved', 'quantity': '1', 'notes': '', 'order_id': '101102', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-08 21:21:02,403 INFO: Extracted quantity: 1 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-08 21:21:02,403 INFO: Extracted change_type: reserved [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-08 21:21:02,403 INFO: Converting quantity '1' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-08 21:21:02,404 INFO: Converted quantity: 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-08 21:21:02,404 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-08 21:21:02,404 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-08 21:21:02,404 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:115]
2025-07-08 21:21:02,405 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:116]
2025-07-08 21:21:02,405 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:117]
2025-07-08 21:21:02,405 INFO:   - order_id: 101102 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:118]
2025-07-08 21:21:02,405 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:119]
2025-07-08 21:21:02,405 INFO: === CALLING CENTRALIZED INVENTORY ADJUSTMENT === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:185]
2025-07-08 21:21:02,406 INFO: Parameters: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:186]
2025-07-08 21:21:02,406 INFO:   - item_id (inventory_item_id): 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:187]
2025-07-08 21:21:02,406 INFO:   - quantity: 1.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:188]
2025-07-08 21:21:02,407 INFO:   - change_type: reserved [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:189]
2025-07-08 21:21:02,407 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:190]
2025-07-08 21:21:02,407 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:191]
2025-07-08 21:21:02,407 INFO:   - created_by: 2 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:192]
2025-07-08 21:21:02,408 INFO:   - item_type: product [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:193]
2025-07-08 21:21:02,408 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:194]
2025-07-08 21:21:02,408 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:195]
2025-07-08 21:21:02,408 INFO:   - order_id: 101102 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:196]
2025-07-08 21:21:02,409 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:197]
2025-07-08 21:21:02,409 INFO:   - custom_expiration_date: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:198]
2025-07-08 21:21:02,409 INFO:   - custom_shelf_life_days: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:199]
2025-07-08 21:21:02,640 ERROR: Exception in SKU inventory adjustment: Error adjusting inventory: property 'reserved_quantity' of 'InventoryItem' object has no setter [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:228]
2025-07-08 21:21:02,640 ERROR: Full traceback: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:229]
Traceback (most recent call last):
  File "/home/runner/workspace/app/blueprints/products/product_inventory_routes.py", line 201, in adjust_sku_inventory
    success = process_inventory_adjustment(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/app/services/inventory_adjustment.py", line 228, in process_inventory_adjustment
    raise e
  File "/home/runner/workspace/app/services/inventory_adjustment.py", line 125, in process_inventory_adjustment
    item.reserved_quantity = (item.reserved_quantity or 0) + quantity
    ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: property 'reserved_quantity' of 'InventoryItem' object has no setter
2025-07-08 21:21:02,642 INFO: === PRODUCT INVENTORY ADJUSTMENT END === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:235]
2025-07-08 21:21:02,642 INFO: Redirecting to SKU view: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:237]
2025-07-08 21:23:05,530 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:23:08,118 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:23:09,106 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:28:32,194 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:28:34,536 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:29:04,924 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:29:05,717 INFO: BatchTrack startup [in /home/runner/workspace/app/utils/unit_utils.py:17]
2025-07-08 21:29:36,046 INFO: === PRODUCT INVENTORY ADJUSTMENT START === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:19]
2025-07-08 21:29:36,046 INFO: Inventory Item ID: 4 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:20]
2025-07-08 21:29:36,046 INFO: User: 2 (admin) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:21]
2025-07-08 21:29:36,046 INFO: Organization: 1 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:22]
2025-07-08 21:29:36,047 INFO: Request method: POST [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:23]
2025-07-08 21:29:36,047 INFO: Request is JSON: False [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:24]
2025-07-08 21:29:36,049 INFO: SKU lookup result: <ProductSKU Admin Apple Sauce - Base - Bulk> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:32]
2025-07-08 21:29:36,050 INFO: SKU details - inventory_item_id: 4, Product: Admin Apple Sauce, Variant: Base [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:34]
2025-07-08 21:29:36,050 INFO: SKU inventory item: <InventoryItem 4> [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:35]
2025-07-08 21:29:36,050 INFO: Current inventory quantity: 10.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:37]
2025-07-08 21:29:36,051 INFO: Form request data: {'csrf_token': 'IjgxZjU0NjFhZGZhNTJjMzA1YTc3OGI5ZmMyZGI2ZTVlYTViYmEyMWEi.aG2NrQ.QmJ_eH4x4kx-_Hnkk43ofHMk2lI', 'action': 'adjust_fifo', 'inventory_id': '', 'change_type': 'recount', 'quantity': '9', 'notes': '', 'order_id': '', 'sale_price': '', 'restock_cost': '', 'expiration_minutes': '30'} [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:54]
2025-07-08 21:29:36,051 INFO: Extracted quantity: 9 (type: <class 'str'>) [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:60]
2025-07-08 21:29:36,051 INFO: Extracted change_type: recount [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:61]
2025-07-08 21:29:36,051 INFO: Converting quantity '9' to float [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:87]
2025-07-08 21:29:36,051 INFO: Converted quantity: 9.0 [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:89]
2025-07-08 21:29:36,052 INFO: Optional fields extracted: [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:113]
2025-07-08 21:29:36,052 INFO:   - notes:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:114]
2025-07-08 21:29:36,052 INFO:   - unit: floz [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:115]
2025-07-08 21:29:36,052 INFO:   - customer: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:116]
2025-07-08 21:29:36,052 INFO:   - sale_price: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:117]
2025-07-08 21:29:36,052 INFO:   - order_id:  [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:118]
2025-07-08 21:29:36,052 INFO:   - cost_override: None [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:119]
2025-07-08 21:29:36,053 INFO: === USING DIRECT FIFO RECOUNT (like raw inventory) === [in /home/runner/workspace/app/blueprints/products/product_inventory_routes.py:137]
