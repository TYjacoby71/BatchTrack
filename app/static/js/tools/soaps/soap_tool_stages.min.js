!function(e){"use strict";const t=e.SoapTool=e.SoapTool||{},{toNumber:a}=t.helpers,{STAGE_CONFIGS:n}=t.constants;function o(){const e=document.getElementById("soapStageTabList");e&&e.querySelectorAll(".soap-stage-status").forEach(e=>e.remove());const t=document.getElementById("soapStageProgress");t&&(t.textContent="")}t.stages={openStageByIndex:function(a){const o=n[a];if(!o)return;const d=document.getElementById(o.tabId);if(d){if(e.bootstrap?.Tab)bootstrap.Tab.getOrCreateInstance(d).show();else{document.querySelectorAll("#soapStageTabList .nav-link").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),document.querySelectorAll("#soapStageTabContent .tab-pane").forEach(e=>{e.classList.remove("show","active")}),d.classList.add("active"),d.setAttribute("aria-selected","true");const e=document.getElementById(o.paneId);e&&e.classList.add("show","active")}t.layout.scheduleStageHeightSync(),d.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},resetStage:function(e){if(1===e){const e=document.getElementById("unitGrams");e&&(e.checked=!0),t.units.setUnit("g",{skipAutoCalc:!0}),document.getElementById("moldWaterWeight").value="",document.getElementById("moldOilPct").value="65",document.getElementById("oilTotalTarget").value="",document.getElementById("moldShape").value="loaf";const a=document.getElementById("moldCylinderCorrection");a&&(a.checked=!1),document.getElementById("moldCylinderFactor").value="0.85",t.mold.updateMoldShapeUI(),t.mold?.updateWetBatterWarning&&t.mold.updateWetBatterWarning(0)}if(2===e){const e=document.getElementById("oilRows");e&&(e.innerHTML="",e.appendChild(t.oils.buildOilRow())),t.oils.updateOilTotals()}if(3===e){const e=document.getElementById("lyeTypeNaoh");e&&(e.checked=!0);const a=document.getElementById("waterMethod");a&&(a.value="percent");const n=document.getElementById("lyeSuperfat");n&&(n.value="5");const o=document.getElementById("lyePurity");o&&(o.value="100");const d=document.getElementById("waterPct");d&&(d.value="33");const l=document.getElementById("lyeConcentration");l&&(l.value="33");const c=document.getElementById("waterRatio");c&&(c.value="2"),t.runner.applyLyeSelection(),t.runner.setWaterMethod(),t.additives.updateAdditivesOutput(t.oils.getTotalOilsGrams())}if(4===e&&(document.getElementById("additiveLactatePct").value="1",document.getElementById("additiveSugarPct").value="1",document.getElementById("additiveSaltPct").value="0.5",document.getElementById("additiveCitricPct").value="0",["additiveLactateName","additiveSugarName","additiveSaltName","additiveCitricName"].forEach(e=>{const t=document.getElementById(e);t&&(t.value="")}),["additiveLactateGi","additiveSugarGi","additiveSaltGi","additiveCitricGi"].forEach(e=>{const t=document.getElementById(e);t&&(t.value="")}),t.additives.updateAdditivesOutput(t.oils.getTotalOilsGrams())),5===e){const e=document.getElementById("fragranceRows");e&&(e.innerHTML="",t.fragrances?.buildFragranceRow&&e.appendChild(t.fragrances.buildFragranceRow()));const a=document.getElementById("fragrancePercentTotal");a&&(a.textContent="0");const n=document.getElementById("fragranceTotalComputed");n&&(n.textContent="--")}t.storage.queueStateSave(),t.storage.queueAutoCalc(),o()},updateStageStatuses:o}}(window);