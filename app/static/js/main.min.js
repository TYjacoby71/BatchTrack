import{cachedFetch}from'./core/CacheManager.js';window.cachedFetch=cachedFetch;function getCSRFToken(){return document.querySelector('meta[name="csrf-token"]')?.content;}
function handleModalTransition(fromModalId,toModalId,focusElementId){const fromModal=document.getElementById(fromModalId);const bootstrapFromModal=bootstrap.Modal.getInstance(fromModal);bootstrapFromModal?.hide();if(toModalId){const toModal=document.getElementById(toModalId);const bootstrapToModal=new bootstrap.Modal(toModal);bootstrapToModal.show();if(focusElementId){toModal.addEventListener('shown.bs.modal',function(){document.getElementById(focusElementId)?.focus();});}}}
function toggleIngredientForm(){const form=document.getElementById('addIngredientForm');const updateForm=document.getElementById('updateInventoryForm');if(updateForm)updateForm.style.display='none';if(form){form.style.display=form.style.display==='none'?'block':'none';}}
function toggleUpdateForm(){const form=document.getElementById('updateInventoryForm');const addForm=document.getElementById('addIngredientForm');if(addForm)addForm.style.display='none';if(form&&form.style.display==='none'){form.style.display='block';}else if(form){form.style.display='none';}}
function showAlert(type,message){const alertDiv=document.createElement('div');alertDiv.className=`alert alert-${type} alert-dismissible fade show mt-3`;alertDiv.innerHTML=`
    ${message}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  `;const mainContent=document.querySelector('main')||document.querySelector('.container').firstChild;if(mainContent){if(mainContent.parentNode){mainContent.parentNode.insertBefore(alertDiv,mainContent);}}else{document.body.insertBefore(alertDiv,document.body.firstChild);}
setTimeout(()=>{if(alertDiv.parentNode){alertDiv.remove();}},5000);}
document.addEventListener('DOMContentLoaded',function(){console.log('Page loaded:',window.location.pathname);if(typeof window.attachMergedInventoryGlobalTypeahead==='function'){console.log('ðŸ”§ MAIN: Suggestions component loaded successfully');}else{console.warn('ðŸ”§ MAIN: Suggestions component not available');}
document.addEventListener('click',function(e){const link=e.target.closest('a[href*="permissions"]');if(link){console.log('Permissions link clicked:',{href:link.href,text:link.textContent.trim(),timestamp:new Date().toISOString()});}});if(typeof $!=='undefined'&&$.fn.tooltip){$('[data-bs-toggle="tooltip"]').tooltip();}
const recipeForm=document.getElementById('recipeForm');if(recipeForm){const requiresContainersCheckbox=document.getElementById('requiresContainers');const allowedContainersSection=document.getElementById('allowedContainersSection');if(requiresContainersCheckbox&&allowedContainersSection){requiresContainersCheckbox.addEventListener('change',function(){allowedContainersSection.style.display=this.checked?'block':'none';});}}});window.filterUnits=function(filterValue){const filter=filterValue||document.getElementById('unitFilter')?.value||'all';const unitCards=document.querySelectorAll('.card.mb-3');unitCards.forEach(card=>{const typeElement=card.querySelector('h5');if(typeElement){const type=typeElement.textContent.toLowerCase();card.style.display=filter==='all'||filter===type?'':'none';}});}
