export class ValidationManager{constructor(mainManager){this.main=mainManager;}
bindEvents(){}
updateValidation(){const issues=[];const warnings=[];if(!this.main.batchType){issues.push('Select batch type');}
if(!this.main.stockChecked){issues.push('Run stock check');}else if(!this.main.stockCheckPassed){warnings.push('Stock shortages detected - confirmation required');}
if(this.main.requiresContainers&&this.main.containerManager.containerPlan){const containmentPercentage=this.main.containerManager.containerPlan.containment_percentage||0;if(containmentPercentage<50){warnings.push('Low container coverage');}}
const isValid=issues.length===0;this.updateValidationUI(isValid,issues,warnings);return isValid;}
updateValidationUI(isValid,issues,warnings){const startBatchBtn=document.getElementById('startBatchBtn');if(startBatchBtn){startBatchBtn.disabled=!isValid;if(isValid){startBatchBtn.innerHTML='<i class="fas fa-play me-2"></i>Start Batch';startBatchBtn.className='btn btn-primary btn-lg w-100';startBatchBtn.title=warnings.length>0?'Warnings: '+warnings.join(', '):'';}else{startBatchBtn.innerHTML='<i class="fas fa-play me-2"></i>'+issues[0];startBatchBtn.className='btn btn-secondary btn-lg w-100';startBatchBtn.title='Issues: '+issues.join(', ');}}
const validationMsg=document.getElementById('validationMessage');if(validationMsg){if(!isValid){validationMsg.innerHTML=`<div class="alert alert-warning"><i class="fas fa-exclamation-triangle"></i> ${issues.join(', ')}</div>`;}else if(warnings.length>0){validationMsg.innerHTML=`<div class="alert alert-info"><i class="fas fa-info-circle"></i> ${warnings.join(', ')}</div>`;}else{validationMsg.innerHTML='';}}}}
export const FormValidator=ValidationManager;export default ValidationManager;
