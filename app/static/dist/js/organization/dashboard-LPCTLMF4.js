(()=>{function i(){let o=document.querySelector("meta[name=csrf-token]");return o?o.getAttribute("content"):""}document.addEventListener("DOMContentLoaded",function(){var o=[].slice.call(document.querySelectorAll("[title]")),t=o.map(function(e){return new bootstrap.Tooltip(e)});let n=document.getElementById("subscriptionTierSelect");n&&(n.addEventListener("change",function(e){let s=e.target.value;s&&confirm(`Are you sure you want to change the subscription tier to ${s}?`)?r(s):n.value=n.dataset.originalValue||""}),n.dataset.originalValue=n.value)});async function r(o){if(!o)return;let t=document.getElementById("subscriptionTierSelect"),n=t?t.dataset.originalValue:"";try{let s=await(await fetch("/organization/update-tier",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":i()},body:JSON.stringify({subscription_tier:o})})).json();s.success?(a("Subscription tier updated successfully","success"),t&&(t.dataset.originalValue=o),setTimeout(()=>window.location.reload(),1e3)):(a(s.error||"Failed to update tier","danger"),t&&(t.value=n))}catch(e){console.error("Tier update error:",e),a("Failed to update tier","danger"),t&&(t.value=n)}}function a(o,t){document.querySelectorAll(".alert-dismissible").forEach(s=>s.remove());let e=document.createElement("div");e.className=`alert alert-${t==="success"?"success":"danger"} alert-dismissible fade show`,e.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 9999; min-width: 300px;",e.innerHTML=`
        ${o}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.remove()},3e3)}})();
