(function(){if(!(typeof window!="undefined"&&!!window.__IS_AUTHENTICATED__))return;let c=["/auth/login","/auth/signup","/auth/oauth","/auth/callback"];function r(){let n=window.location.pathname;return c.some(e=>n.startsWith(e))}async function a(n){try{let e=n?`?include=${encodeURIComponent(n)}`:"",t=await fetch(`/api/drawers/check${e}`);if(!t.ok){t.status!==401&&console.warn("DrawerCadence: check failed",t.status);return}await t.json().catch(()=>({}))}catch(e){console.warn("DrawerCadence: request error",e)}}function i(){a("retention")}function s(){let n="drawerCadence:global_link:lastCheck",e=window.BT_STORAGE&&typeof window.BT_STORAGE.key=="function"?window.BT_STORAGE.key(n):n,t=Date.now(),u=10080*60*1e3;try{let o=Number(localStorage.getItem(e)||0);if(o&&t-o<u)return;localStorage.setItem(e,String(t))}catch(o){console.warn("DrawerCadence: unable to store cadence window",o)}a("global_link")}document.addEventListener("DOMContentLoaded",()=>{r()||(i(),s())})})();
