(()=>{document.addEventListener("DOMContentLoaded",function(){let o=document.getElementById("initialInventoryModal");o&&(new bootstrap.Modal(o).show(),o.addEventListener("hide.bs.modal",function(t){if(!(t.relatedTarget&&t.relatedTarget.getAttribute("data-bs-target")==="#editDetailsModal"))return t.preventDefault(),!1}),o.addEventListener("shown.bs.modal",function(){document.getElementById("initial_quantity").focus()}));let s=document.getElementById("editDetailsModal");s&&o&&s.addEventListener("hidden.bs.modal",function(){document.getElementById("initialInventoryModal")&&new bootstrap.Modal(o).show()});let i=document.querySelector("#editDetailsModal form"),d,c;if(i){let e=i.querySelector('input[name="quantity"]'),t=e?parseFloat(e.value):0;c=document.getElementById("recountConfirmModal"),c&&(d=new bootstrap.Modal(c),i.addEventListener("submit",function(n){n.preventDefault(),parseFloat(e.value)!==t?d.show():i.submit()}))}let u=document.getElementById("confirmRecount");u&&u.addEventListener("click",function(){let e=document.createElement("input");e.type="hidden",e.name="change_type",e.value="recount",i.appendChild(e),d&&d.hide(),i.submit()});let l=document.getElementById("modal_override_cost"),a=document.getElementById("modal_cost_per_unit"),r=document.getElementById("costOverrideWarningModal");if(l&&a&&r){let e=new bootstrap.Modal(r);l.addEventListener("change",function(){this.checked?e.show():a.readOnly=!0});let t=document.getElementById("confirmCostOverride");t&&t.addEventListener("click",function(){a.readOnly=!1,e.hide()}),r.addEventListener("hidden.bs.modal",function(){a.readOnly&&(l.checked=!1)})}let f=document.querySelector('select[name="type"]');f&&f.addEventListener("change",function(){let e=document.getElementById("categorySection");e&&(e.style.display=this.value==="ingredient"?"block":"none")});let m=document.getElementById("editCategory");m&&m.addEventListener("change",function(){let e=document.getElementById("density");if(e)if(this.value==="")e.disabled=!1,e.readOnly=!1;else{let t=this.options[this.selectedIndex],n=t&&t.dataset?t.dataset.density:"";n&&(e.value=n),e.disabled=!0,e.readOnly=!0}}),setTimeout(function(){let t=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(n){return new bootstrap.Popover(n,{container:"body"})});document.addEventListener("click",function(n){n.target.closest('[data-bs-toggle="popover"]')||t.forEach(function(g){g.hide()})})},100),new URLSearchParams(window.location.search).get("fifo")==="true"&&(document.getElementById("fifoFilter").checked=!0);let y=document.getElementById("initial-stock-btn");y&&y.addEventListener("click",function(){})});})();
