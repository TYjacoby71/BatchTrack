(()=>{function u(t,o){if(!t){let e=document.getElementById(o);e&&(e.innerHTML='<option value="">Select Variant</option>');return}fetch(`/api/products/${t}/variants`).then(e=>e.json()).then(e=>{let c=document.getElementById(o);c&&(c.innerHTML='<option value="">Select Variant</option>',e.forEach(i=>{let n=document.createElement("option");n.value=i.id,n.textContent=i.name,c.appendChild(n)}))}).catch(e=>{console.error("Error loading variants:",e)})}function d(t,o={},e={}){let c=`/products/inventory/adjust/${t}`,{reloadOnSuccess:i=!1}=e;return fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a()},body:JSON.stringify(o)}).then(async n=>{let r=(n.headers.get("content-type")||"").includes("application/json")?await n.json():{};if(!n.ok||r.success===!1){let l=r.message||r.error||`Inventory adjustment failed (status ${n.status})`;throw new Error(l)}return r.message&&s(r.message,"success"),i&&window.location.reload(),r}).catch(n=>{throw console.error("Error adjusting inventory:",n),s(n.message||"Network error occurred","error"),n})}function f(t){return fetch("/products/inventory/add-from-batch",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a()},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>(e.success?s(e.message||"Inventory added successfully","success"):s(e.error||"Failed to add inventory","error"),e)).catch(e=>{throw console.error("Error adding inventory from batch:",e),s("Network error occurred","error"),e})}function a(){let t=document.querySelector('input[name="csrf_token"]')||document.querySelector('meta[name="csrf-token"]');return t?t.value||t.content:""}function s(t,o="info"){typeof showAlert=="function"?showAlert(t,o):typeof alert=="function"?alert(t):console.log(`${o.toUpperCase()}: ${t}`)}window.loadVariants=u;window.adjustSkuInventory=d;window.addInventoryFromBatch=f;})();
