<div class="tab-pane fade" id="soapStage2Pane" role="tabpanel" aria-labelledby="soapStage2Tab">
  <div class="soap-stage-body p-3" data-stage-index="1">
    <div class="position-relative">
      <div class="row g-2 soap-stage-grid">
        <div class="col-12">
          <div id="oilRows"></div>
          {% include 'tools/soaps/stages/partials/_oil_row_template.html' %}
        </div>
        <div class="d-flex flex-wrap gap-1 align-items-center mt-2">
          <button class="btn btn-sm btn-outline-primary" id="addOil" type="button" data-soap-action="add-oil">Add Oil</button>
          <button class="btn btn-sm btn-outline-primary" id="openBulkOilModal" type="button">Bulk Oils</button>
          <button class="btn btn-sm btn-outline-secondary" id="normalizeOils" type="button" data-soap-action="normalize-oils">Normalize to 100%</button>
          <div class="small text-muted">Total %: <span id="oilPercentTotal">0</span>%</div>
          <div class="small text-muted">Current oils: <span id="oilTotalComputed">--</span></div>
          <div class="small text-muted">Bulk selected: <span id="bulkOilSelectionCount">0</span></div>
        </div>
        <div class="alert alert-warning small mt-1 d-none" id="oilLimitWarning"></div>
        <div class="alert alert-light border small mt-1 d-none" id="oilBlendTips"></div>
      </div>
    </div>
    {% set stage_index = 1 %}
    {% include 'tools/soaps/stages/_stage_actions.html' %}
    <div class="card oil-profile-float d-none" id="oilProfileFloat">
      <div class="card-body p-2">
          <div class="d-flex justify-content-between align-items-center mb-1">
            <strong class="small">Selected oil profile</strong>
            <span class="small text-muted" id="selectedOilName">Pick an oil to preview</span>
          </div>
          <div class="small text-muted">SAP (KOH): <span id="selectedOilSap">--</span> Â· Iodine: <span id="selectedOilIodine">--</span></div>
          <div class="mt-2">
            <div class="small text-muted">Qualities</div>
            <div class="d-flex justify-content-between"><span>Hardness</span><span id="selectedOilHardness">--</span></div>
            <div class="d-flex justify-content-between"><span>Cleansing</span><span id="selectedOilCleansing">--</span></div>
            <div class="d-flex justify-content-between"><span>Conditioning</span><span id="selectedOilConditioning">--</span></div>
            <div class="d-flex justify-content-between"><span>Bubbly</span><span id="selectedOilBubbly">--</span></div>
            <div class="d-flex justify-content-between"><span>Creamy</span><span id="selectedOilCreamy">--</span></div>
          </div>
          <div class="mt-2">
            <div class="small text-muted">Fatty acids</div>
            <div class="table-responsive">
              <table class="table table-sm soap-oil-profile mb-0">
                <tbody>
                  <tr><td>Lauric</td><td class="text-end" id="selectedOilLauric">--</td></tr>
                  <tr><td>Myristic</td><td class="text-end" id="selectedOilMyristic">--</td></tr>
                  <tr><td>Palmitic</td><td class="text-end" id="selectedOilPalmitic">--</td></tr>
                  <tr><td>Stearic</td><td class="text-end" id="selectedOilStearic">--</td></tr>
                  <tr><td>Ricinoleic</td><td class="text-end" id="selectedOilRicinoleic">--</td></tr>
                  <tr><td>Oleic</td><td class="text-end" id="selectedOilOleic">--</td></tr>
                  <tr><td>Linoleic</td><td class="text-end" id="selectedOilLinoleic">--</td></tr>
                  <tr><td>Linolenic</td><td class="text-end" id="selectedOilLinolenic">--</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>
