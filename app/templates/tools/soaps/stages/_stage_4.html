<div class="tab-pane fade" id="soapStage4Pane" role="tabpanel" aria-labelledby="soapStage4Tab">
  <div class="soap-stage-body p-3" data-stage-index="3">
    <div class="row g-2 soap-stage-grid align-items-end additive-row">
      <div class="col-lg-3 col-md-3 soap-field-stack additive-percent-col">
        <label class="form-label">Sodium lactate</label>
        <div class="soap-input-suffix" data-suffix="%">
          <input type="number" class="form-control" id="additiveLactatePct" min="0" max="5" step="0.1" value="1">
        </div>
      </div>
      <div class="col-lg-3 col-md-3 soap-field-stack additive-weight-col">
        <label class="form-label">Weight</label>
        <div class="soap-input-suffix unit-suffix" data-suffix="g">
          <input type="number" class="form-control" id="additiveLactateWeight" placeholder="--">
        </div>
      </div>
      <div class="col-lg-6 col-md-6 soap-field-stack additive-link-col">
        <label class="form-label">Item link</label>
        <div class="position-relative">
          <input type="text" class="form-control additive-typeahead" id="additiveLactateName" placeholder="Link sodium lactate (optional)">
          <input type="hidden" id="additiveLactateGi">
          <input type="hidden" id="additiveLactateUnit">
          <input type="hidden" id="additiveLactateCategory">
          <div class="list-group position-absolute w-100 d-none" data-role="suggestions"></div>
        </div>
      </div>
    </div>
    <div class="row g-2 soap-stage-grid align-items-end additive-row mt-2">
      <div class="col-lg-3 col-md-3 soap-field-stack additive-percent-col">
        <label class="form-label">Sugar</label>
        <div class="soap-input-suffix" data-suffix="%">
          <input type="number" class="form-control" id="additiveSugarPct" min="0" max="5" step="0.1" value="1">
        </div>
      </div>
      <div class="col-lg-3 col-md-3 soap-field-stack additive-weight-col">
        <label class="form-label">Weight</label>
        <div class="soap-input-suffix unit-suffix" data-suffix="g">
          <input type="number" class="form-control" id="additiveSugarWeight" placeholder="--">
        </div>
      </div>
      <div class="col-lg-6 col-md-6 soap-field-stack additive-link-col">
        <label class="form-label">Item link</label>
        <div class="position-relative">
          <input type="text" class="form-control additive-typeahead" id="additiveSugarName" placeholder="Link sugar (optional)">
          <input type="hidden" id="additiveSugarGi">
          <input type="hidden" id="additiveSugarUnit">
          <input type="hidden" id="additiveSugarCategory">
          <div class="list-group position-absolute w-100 d-none" data-role="suggestions"></div>
        </div>
      </div>
    </div>
    <div class="row g-2 soap-stage-grid align-items-end additive-row mt-2">
      <div class="col-lg-3 col-md-3 soap-field-stack additive-percent-col">
        <label class="form-label">Salt</label>
        <div class="soap-input-suffix" data-suffix="%">
          <input type="number" class="form-control" id="additiveSaltPct" min="0" max="5" step="0.1" value="0.5">
        </div>
      </div>
      <div class="col-lg-3 col-md-3 soap-field-stack additive-weight-col">
        <label class="form-label">Weight</label>
        <div class="soap-input-suffix unit-suffix" data-suffix="g">
          <input type="number" class="form-control" id="additiveSaltWeight" placeholder="--">
        </div>
      </div>
      <div class="col-lg-6 col-md-6 soap-field-stack additive-link-col">
        <label class="form-label">Item link</label>
        <div class="position-relative">
          <input type="text" class="form-control additive-typeahead" id="additiveSaltName" placeholder="Link salt (optional)">
          <input type="hidden" id="additiveSaltGi">
          <input type="hidden" id="additiveSaltUnit">
          <input type="hidden" id="additiveSaltCategory">
          <div class="list-group position-absolute w-100 d-none" data-role="suggestions"></div>
        </div>
      </div>
    </div>
    <div class="row g-2 soap-stage-grid align-items-end additive-row mt-2">
      <div class="col-lg-3 col-md-3 soap-field-stack additive-percent-col">
        <label class="form-label">Citric acid</label>
        <div class="soap-input-suffix" data-suffix="%">
          <input type="number" class="form-control" id="additiveCitricPct" min="0" max="5" step="0.1" value="0">
        </div>
      </div>
      <div class="col-lg-3 col-md-3 soap-field-stack additive-weight-col">
        <label class="form-label">Weight</label>
        <div class="soap-input-suffix unit-suffix" data-suffix="g">
          <input type="number" class="form-control" id="additiveCitricWeight" placeholder="--">
        </div>
      </div>
      <div class="col-lg-6 col-md-6 soap-field-stack additive-link-col">
        <label class="form-label">Item link</label>
        <div class="position-relative">
          <input type="text" class="form-control additive-typeahead" id="additiveCitricName" placeholder="Link citric acid (optional)">
          <input type="hidden" id="additiveCitricGi">
          <input type="hidden" id="additiveCitricUnit">
          <input type="hidden" id="additiveCitricCategory">
          <div class="list-group position-absolute w-100 d-none" data-role="suggestions"></div>
        </div>
      </div>
    </div>
    <div class="small text-muted mt-2">All additive grams are based on total oil weight.</div>
    <div class="small text-muted mt-1">Citric acid adds extra lye.</div>
    <div class="small text-muted mt-1">Extra lye for citric: <span id="additiveCitricLyeOut">--</span></div>
    {% set stage_index = 3 %}
    {% include 'tools/soaps/stages/_stage_actions.html' %}
  </div>
</div>
