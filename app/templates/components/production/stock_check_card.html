
<!-- Stock Check Card -->
<div class="card mb-4">
  <div class="card-header">
    <h5 class="mb-0">
      <i class="fas fa-clipboard-check"></i> Ingredient Stock Check
    </h5>
  </div>
  <div class="card-body">
    <div class="d-flex gap-2 mb-3">
      <button type="button" class="btn btn-warning" @click="checkStockOrWarn()">
        <i class="fas fa-search"></i> Check Stock
      </button>
      <div class="ms-auto" x-show="stockChecked">
        <span class="badge" :class="stockCheckPassed ? 'bg-success' : 'bg-danger'">
          <i class="fas" :class="stockCheckPassed ? 'fa-check' : 'fa-times'"></i>
          <span x-text="stockCheckPassed ? 'Stock OK' : 'Stock Issues'"></span>
        </span>
      </div>
    </div>

    <!-- Stock Results Table -->
    <div x-show="stockChecked && stockResults.length > 0">
      <div class="table-responsive">
        <table class="table table-sm table-striped">
          <thead>
            <tr>
              <th>Ingredient</th>
              <th>Required</th>
              <th>Available</th>
              <th>Unit</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="result in stockResults" :key="result.ingredient">
              <tr>
                <td x-text="result.ingredient"></td>
                <td x-text="result.needed.toFixed(2)"></td>
                <td x-text="result.available.toFixed(2)"></td>
                <td x-text="result.unit"></td>
                <td>
                  <span class="badge" 
                    :class="result.status === 'OK' ? 'bg-success' : 'bg-danger'" 
                    x-text="result.status">
                  </span>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>

      <div class="d-flex gap-2 mt-3">
        <button type="button" class="btn btn-outline-secondary btn-sm" @click="downloadCSV">
          <i class="fas fa-download"></i> Download CSV
        </button>
        <button type="button" class="btn btn-outline-primary btn-sm" @click="downloadShoppingList">
          <i class="fas fa-shopping-cart"></i> Shopping List
        </button>
      </div>
    </div>

    <div x-show="stockChecked && stockResults.length === 0" class="alert alert-info">
      <i class="fas fa-info-circle"></i>
      No stock check data available.
    </div>
  </div>
</div>
