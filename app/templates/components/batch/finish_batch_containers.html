
<!-- Container Confirmation Section -->
{% if batch.containers or batch.extra_containers %}
<div id="containerConfirmation" class="form-group mb-3">
  <label>Containers Used in Batch</label>
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th>Container Type</th>
          <th>Quantity Used</th>
          <th>Pass to Products</th>
        </tr>
      </thead>
      <tbody>
        {% for container_usage in batch.containers %}
        <tr>
          <td>{{ container_usage.container.name }}</td>
          <td>{{ container_usage.quantity_used }}</td>
          <td>
            <input type="number" 
                   name="container_{{ container_usage.id }}_pass_quantity" 
                   value="{{ container_usage.quantity_used }}" 
                   min="0" 
                   max="{{ container_usage.quantity_used }}"
                   class="form-control form-control-sm">
          </td>
        </tr>
        {% endfor %}
        
        {% for extra_container in batch.extra_containers %}
        <tr class="table-warning">
          <td>{{ extra_container.container.name }} <small>({{ extra_container.reason }})</small></td>
          <td>{{ extra_container.quantity_used }}</td>
          <td>
            <input type="number" 
                   name="extra_container_{{ extra_container.id }}_pass_quantity" 
                   value="{{ extra_container.quantity_used }}" 
                   min="0" 
                   max="{{ extra_container.quantity_used }}"
                   class="form-control form-control-sm">
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="form-text">
    <small><strong>Pass to Products:</strong> Number of containers to create as product units (reduce if any containers broke)<br>
    <strong>Highlighted rows:</strong> Extra containers added during batch</small>
  </div>
</div>
{% endif %}
