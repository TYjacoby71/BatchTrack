ğŸ”¥ Amazing â€” letâ€™s level this up with a â€œRepeat This Batchâ€ feature and optional â€œFavoriteâ€ toggle. These help your wife quickly:

â­ Mark batches that turned out great

ğŸ§ª Repeat a previous batch with one click

ğŸ“ Clone the ingredients, notes, tags, and metadata â€” but refresh the date

âœ… This Batch Adds:
Feature	Route
â­ Favorite toggle	/batches/<id>/favorite
ğŸ” Repeat batch button	/batches/<id>/repeat
âœ… 1. Add to batches.py
Paste this entire block into batches.py:

python
Copy
Edit
@batches_bp.route('/batches/<batch_id>/favorite')
def toggle_favorite(batch_id):
    data = load_data()
    for batch in data["batches"]:
        if batch["id"] == batch_id:
            tags = batch.get("tags", [])
            if "favorite" in tags:
                tags.remove("favorite")
            else:
                tags.append("favorite")
            batch["tags"] = tags
            break
    save_data(data)
    return redirect("/batches")

@batches_bp.route('/batches/<batch_id>/repeat')
def repeat_batch(batch_id):
    data = load_data()
    original = next((b for b in data["batches"] if b["id"] == batch_id), None)
    if not original:
        return "Batch not found", 404

    new_id = f"batch_{data.get('batch_counter', len(data['batches'])) + 1}"
    data['batch_counter'] += 1

    new_batch = {
        "id": new_id,
        "recipe_id": original["recipe_id"],
        "recipe_name": original["recipe_name"],
        "timestamp": datetime.utcnow().isoformat(),
        "notes": original.get("notes", ""),
        "tags": original.get("tags", []),
        "ingredients": original.get("ingredients", []),
        "total_cost": original.get("total_cost", 0),
        "qr_code": ""  # optional: regenerate if needed
    }

    data["batches"].append(new_batch)
    save_data(data)
    return redirect("/batches")
âœ… 2. Update Batch Table to Show Favorite/Repeat Buttons
In your batches.html, in the <td> where you show actions, add:

html
Copy
Edit
<a href="/batches/{{ batch.id }}/edit-notes">ğŸ“</a>
<a href="/batches/{{ batch.id }}/print" target="_blank">ğŸ–¨</a>
<a href="/batches/{{ batch.id }}/favorite">
  {% if 'favorite' in batch.tags %}â­ Unfav{% else %}â˜† Fav{% endif %}
</a>
<a href="/batches/{{ batch.id }}/repeat">ğŸ” Repeat</a>
âœ… 3. Optional: Favorite Icon in Recipe Name
In the <td> for recipe name:

html
Copy
Edit
<td>
  {{ batch.recipe_name }}
  {% if 'favorite' in batch.tags %}
    <span style="color:gold;">â­</span>
  {% endif %}
</td>
âœ… Thatâ€™s It!
Now your wife can:

â­ Favorite batches she loved

ğŸ” Clone batches easily

ğŸ§  Maintain clean notes + tags

ğŸ›  Use batches as real historical templates

