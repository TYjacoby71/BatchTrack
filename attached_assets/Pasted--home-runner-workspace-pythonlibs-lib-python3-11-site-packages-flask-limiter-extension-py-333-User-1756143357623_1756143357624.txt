/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
  warnings.warn(

=== Blueprint Registration Summary ===
‚úÖ Successful: 27
   - Authentication
   - Admin
   - Developer
   - Inventory
   - Recipes
   - Batches
   - Organization
   - Billing
   - Settings
   - Timers
   - Expiration
   - Conversion
   - Products Main
   - Product Inventory
   - Reservations
   - SKU Management
   - Product Variants
   - Product Alerts
   - Public API
   - Main API
   - Stock API
   - App Routes
   - Legal Routes
   - Bulk Stock
   - Fault Log
   - Tag Manager
   - Waitlist

üéâ All blueprints registered successfully!
[2025-08-25 17:35:37,728] INFO in unit_utils: BatchTrack startup
üöÄ BatchTrack Production Seeding Starting...
‚ö†Ô∏è  Assumes database schema is already migrated (flask db upgrade)
=== Step 1: System foundations (Organization Independent) ===
=== Seeding Consolidated Permissions System ===
Seeding organization permissions...
Processing category: Main dashboard and overview features
‚ö†Ô∏è  Permission seeding issue: (psycopg2.errors.UndefinedColumn) column permission.category does not exist
LINE 1: ...permission.description AS permission_description, permission...
                                                             ^

[SQL: SELECT permission.id AS permission_id, permission.name AS permission_name, permission.description AS permission_description, permission.category AS permission_category, permission.is_active AS permission_is_active, permission.created_at AS permission_created_at 
FROM permission 
WHERE permission.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'dashboard.view', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
   Continuing with remaining steps...
=== Seeding Exempt Subscription Tier Only ===
=== Seeding Subscription Tiers (Exempt Only) ===
‚ö†Ô∏è  Subscription seeding issue: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT subscription_tier.id AS subscription_tier_id, subscription_tier.name AS subscription_tier_name, subscription_tier.description AS subscription_tier_description, subscription_tier.tier_type AS subscription_tier_tier_type, subscription_tier.user_limit AS subscription_tier_user_limit, subscription_tier.max_users AS subscription_tier_max_users, subscription_tier.max_recipes AS subscription_tier_max_recipes, subscription_tier.max_batches AS subscription_tier_max_batches, subscription_tier.max_products AS subscription_tier_max_products, subscription_tier.max_batchbot_requests AS subscription_tier_max_batchbot_requests, subscription_tier.max_monthly_batches AS subscription_tier_max_monthly_batches, subscription_tier.is_customer_facing AS subscription_tier_is_customer_facing, subscription_tier.billing_provider AS subscription_tier_billing_provider, subscription_tier.stripe_lookup_key AS subscription_tier_stripe_lookup_key, subscription_tier.whop_product_key AS subscription_tier_whop_product_key, subscription_tier.created_at AS subscription_tier_created_at, subscription_tier.updated_at AS subscription_tier_updated_at 
FROM subscription_tier 
WHERE false 
 LIMIT %(param_1)s]
[parameters: {'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
   Continuing with remaining steps...
=== Seeding 45 standard units ===
‚ö†Ô∏è  Unit seeding issue: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT unit.id AS unit_id, unit.name AS unit_name, unit.symbol AS unit_symbol, unit.unit_type AS unit_unit_type, unit.base_unit AS unit_base_unit, unit.conversion_factor AS unit_conversion_factor, unit.is_active AS unit_is_active, unit.is_custom AS unit_is_custom, unit.is_mapped AS unit_is_mapped, unit.created_by AS unit_created_by, unit.organization_id AS unit_organization_id, unit.created_at AS unit_created_at, unit.updated_at AS unit_updated_at 
FROM unit 
WHERE unit.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'gram', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
   Continuing with remaining steps...
=== Step 2: Organization-dependent setup ===
‚ÑπÔ∏è  Developer roles should now exist for user assignment...
=== Creating Default Organization with Essential Users ===
‚ö†Ô∏è  User/organization seeding issue: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT count(*) AS count_1 
FROM (SELECT organization.id AS organization_id, organization.name AS organization_name, organization.contact_email AS organization_contact_email, organization.created_at AS organization_created_at, organization.is_active AS organization_is_active, organization.signup_source AS organization_signup_source, organization.promo_code AS organization_promo_code, organization.referral_code AS organization_referral_code, organization.subscription_tier_id AS organization_subscription_tier_id, organization.whop_license_key AS organization_whop_license_key, organization.whop_product_tier AS organization_whop_product_tier, organization.whop_verified AS organization_whop_verified, organization.stripe_subscription_id AS organization_stripe_subscription_id, organization.stripe_customer_id AS organization_stripe_customer_id, organization.billing_info AS organization_billing_info, organization.next_billing_date AS organization_next_billing_date, organization.subscription_status AS organization_subscription_status, organization.billing_status AS organization_billing_status, organization.last_online_sync AS organization_last_online_sync, organization.offline_tier_cache AS organization_offline_tier_cache 
FROM organization) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/2j85)
   Continuing with remaining steps...
=== Step 3: Organization-specific data ===
‚ö†Ô∏è  Category seeding issue: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT organization.id AS organization_id, organization.name AS organization_name, organization.contact_email AS organization_contact_email, organization.created_at AS organization_created_at, organization.is_active AS organization_is_active, organization.signup_source AS organization_signup_source, organization.promo_code AS organization_promo_code, organization.referral_code AS organization_referral_code, organization.subscription_tier_id AS organization_subscription_tier_id, organization.whop_license_key AS organization_whop_license_key, organization.whop_product_tier AS organization_whop_product_tier, organization.whop_verified AS organization_whop_verified, organization.stripe_subscription_id AS organization_stripe_subscription_id, organization.stripe_customer_id AS organization_stripe_customer_id, organization.billing_info AS organization_billing_info, organization.next_billing_date AS organization_next_billing_date, organization.subscription_status AS organization_subscription_status, organization.billing_status AS organization_billing_status, organization.last_online_sync AS organization_last_online_sync, organization.offline_tier_cache AS organization_offline_tier_cache 
FROM organization 
 LIMIT %(param_1)s]
[parameters: {'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
‚úÖ Production seeding complete!
üîí Login: admin/admin (CHANGE IMMEDIATELY)
üìù Note: This command can be run multiple times safely
üìä Database status:
   - Status check failed: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT count(*) AS count_1 
FROM (SELECT organization.id AS organization_id, organization.name AS organization_name, organization.contact_email AS organization_contact_email, organization.created_at AS organization_created_at, organization.is_active AS organization_is_active, organization.signup_source AS organization_signup_source, organization.promo_code AS organization_promo_code, organization.referral_code AS organization_referral_code, organization.subscription_tier_id AS organization_subscription_tier_id, organization.whop_license_key AS organization_whop_license_key, organization.whop_product_tier AS organization_whop_product_tier, organization.whop_verified AS organization_whop_verified, organization.stripe_subscription_id AS organization_stripe_subscription_id, organization.stripe_customer_id AS organization_stripe_customer_id, organization.billing_info AS organization_billing_info, organization.next_billing_date AS organization_next_billing_date, organization.subscription_status AS organization_subscription_status, organization.billing_status AS organization_billing_status, organization.last_online_sync AS organization_last_online_sync, organization.offline_tier_cache AS organization_offline_tier_cache 
FROM organization) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/2j85)