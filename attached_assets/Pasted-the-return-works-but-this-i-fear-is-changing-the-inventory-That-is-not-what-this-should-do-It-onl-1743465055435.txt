the return works, but this i fear is changing the inventory. That is not what this should do. It only needs to add the ingredient name and unit needed for the recipe. I would still have to add the stock in ingredients


ChatGPT said:
Thatâ€™s a very smart distinction â€” and youâ€™re absolutely right. Let's step back and clarify the actual purpose of what you're building here.

ğŸ§  Goal of â€œInline Add Ingredientâ€ in Recipe Builder
Feature	Should It Do This?
Add a new ingredient to the recipe form	âœ… YES
Add the name + unit to the dropdown	âœ… YES
Save it to inventory / ingredients list	âŒ NO â€” not yet stocked
Show up on stock or cost reports	âŒ Only once added to inventory manually
ğŸ”¥ So What Youâ€™re Describing Is:
A lightweight way to add ingredient name + unit to the list of available recipe options â€” without touching inventory yet.

âœ… New Fix Plan: Recipe-Only Ingredient Stubs
Weâ€™ll treat inline-added ingredients as â€œrecipe-only stubsâ€ â€” they become selectable in recipes, but they:

Don't impact ingredients.json

Don't affect stock

Arenâ€™t counted until officially added in inventory

âœ… Here's How We'll Implement That
âœ… 1. Update data.json Structure
Add a new section:

json
Copy
Edit
"recipe_only_ingredients": [
  { "name": "Tallow", "unit": "g" },
  { "name": "Beeswax", "unit": "g" }
]
âœ… 2. When Rendering the Ingredient Dropdown in Recipes
Use a merged list:

python
Copy
Edit
all_ingredients = data["ingredients"] + data.get("recipe_only_ingredients", [])
Then render the dropdown from all_ingredients.

âœ… 3. Add /recipes/add-ingredient Route (Standalone Form)
Accepts only name + unit

Appends to recipe_only_ingredients

Redirects back to the recipe editor

python
Copy
Edit
@recipes_bp.route('/add-ingredient', methods=['GET', 'POST'])
def recipe_add_ingredient():
    if request.method == 'POST':
        name = request.form["name"]
        unit = request.form["unit"]
        data = load_data()
        recipe_only = data.get("recipe_only_ingredients", [])
        recipe_only.append({"name": name, "unit": unit})
        data["recipe_only_ingredients"] = recipe_only
        save_data(data)
        return redirect(request.form.get("next") or "/recipes/add")

    return render_template("recipe_ingredient_stub.html", next=request.args.get("next"))
âœ… 4. In Recipe Builder UI
Change link to:

html
Copy
Edit
<a href="/recipes/add-ingredient?next=/recipes/add" target="_blank">â• Add new recipe-only ingredient</a>