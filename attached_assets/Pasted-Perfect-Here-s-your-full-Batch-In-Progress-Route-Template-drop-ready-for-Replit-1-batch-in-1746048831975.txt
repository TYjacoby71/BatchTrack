Perfect. Here‚Äôs your full Batch In Progress Route & Template drop ‚Äî ready for Replit.

‚úÖ 1. batch_in_progress() Route (routes/batches.py)
python
Copy
Edit
@batch_bp.route('/batch/in-progress/<int:batch_id>')
def batch_in_progress(batch_id):
    batch = Batch.query.get_or_404(batch_id)

    ingredients = BatchIngredient.query.filter_by(batch_id=batch.id).all()
    containers = BatchContainer.query.filter_by(batch_id=batch.id).all()
    timers = BatchTimer.query.filter_by(batch_id=batch.id).all()

    inventory_items = InventoryItem.query.all()
    units = Unit.query.all()
    products = Product.query.all()
    variants = ProductVariation.query.all()

    return render_template('batch_in_progress.html',
        batch=batch,
        ingredients=ingredients,
        containers=containers,
        timers=timers,
        inventory_items=inventory_items,
        units=units,
        products=products,
        variants=variants
    )
‚úÖ 2. batch_in_progress.html Template Stub
Paste into templates/batch_in_progress.html:

html
Copy
Edit
{% extends 'layout.html' %}
{% block content %}
<h2>üß™ Batch In Progress: {{ batch.recipe_name }}</h2>

<form method="POST" action="{{ url_for('batch.save_batch', batch_id=batch.id) }}">
    <div class="form-group">
        <label for="notes">Notes</label>
        <textarea name="notes" class="form-control">{{ batch.notes or '' }}</textarea>
    </div>

    <div class="form-group">
        <label for="tags">Tags</label>
        <input type="text" name="tags" class="form-control" value="{{ batch.tags or '' }}">
    </div>

    {% if batch.batch_type == 'ingredient' %}
        <div class="form-group">
            <label for="yield">Yield</label>
            <input type="number" step="0.01" name="yield_amount" value="{{ batch.yield_amount or '' }}">
            <select name="yield_unit">
                {% for unit in units %}
                    <option value="{{ unit.name }}" {% if batch.yield_unit == unit.name %}selected{% endif %}>
                        {{ unit.name }}
                    </option>
                {% endfor %}
            </select>
        </div>
    {% elif batch.batch_type == 'product' %}
        <div class="form-group">
            <label for="product">Product</label>
            <select name="product_id">
                {% for product in products %}
                    <option value="{{ product.id }}" {% if batch.product_id == product.id %}selected{% endif %}>
                        {{ product.name }}
                    </option>
                {% endfor %}
            </select>

            <label for="variant">Variant</label>
            <select name="variant_id">
                {% for v in variants %}
                    <option value="{{ v.id }}" {% if batch.variant_id == v.id %}selected{% endif %}>
                        {{ v.name }}
                    </option>
                {% endfor %}
            </select>

            <label for="final_quantity">Quantity Produced</label>
            <input type="number" name="final_quantity" step="0.01" value="{{ batch.yield_amount or '' }}">
        </div>
    {% endif %}

    <!-- Placeholder: render ingredients, containers, and timers dynamically -->

    <div class="form-group mt-4">
        <button class="btn btn-primary" type="submit">üíæ Save</button>
        <a href="{{ url_for('batch.finish_batch', batch_id=batch.id) }}" class="btn btn-success">‚úÖ Finish</a>
        <a href="{{ url_for('batch.cancel_batch', batch_id=batch.id) }}" class="btn btn-warning">‚õî Cancel</a>
        <a href="{{ url_for('batch.mark_batch_failed', batch_id=batch.id) }}" class="btn btn-danger">‚ùå Mark as Failed</a>
    </div>
</form>
{% endblock %}
‚úÖ What You Have Now
You can:

Visit /batch/in-progress/<id>

See and edit:

Notes

Tags

Yield (for ingredient)

Product + variant (for product)

