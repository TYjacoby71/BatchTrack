‚úÖ Here‚Äôs What You Should Do
üîÅ 1. Replace the Existing Unit Modal Block in quick_add_ingredient_modal.html with this:
html
Copy
Edit
<div class="modal fade" id="quickAddUnitModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Quick Add Unit</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="quickAddUnitForm">
          <div class="mb-3">
            <label for="unitName" class="form-label">Unit Name</label>
            <input type="text" class="form-control" id="unitName" required>
          </div>
          <div class="mb-3">
            <label for="unitType" class="form-label">Type</label>
            <select class="form-select" id="unitType">
              <option value="count">Count</option>
              <option value="volume">Volume</option>
              <option value="weight">Weight</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelQuickUnit">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveQuickUnit">Add Unit</button>
      </div>
    </div>
  </div>
</div>
üîÅ 2. Add This Script to Your JS (in main.js or inline):
js
Copy
Edit
document.getElementById('cancelQuickUnit')?.addEventListener('click', () => {
  const unitModal = bootstrap.Modal.getInstance(document.getElementById('quickAddUnitModal'));
  if (unitModal) unitModal.hide();

  setTimeout(() => {
    const ingredientModal = new bootstrap.Modal(document.getElementById('quickAddIngredientModal'));
    ingredientModal.show();
    document.getElementById('ingredientName')?.focus();
  }, 300);
});
‚úÖ Result
‚ùå User can‚Äôt click out or press Esc to escape

‚úÖ Must explicitly click "Cancel" or "Add Unit"

‚úÖ Either way, user is returned to ingredient modal