- Production Planning
   - Exports
All blueprints registered successfully!
[2025-11-05 18:15:09,616] INFO in __init__: ğŸ”’ db.create_all() not enabled; Alembic migrations are the source of truth
ğŸš€ BatchTrack Production Seeding Starting...
âš ï¸  Assumes database schema is already migrated (flask db upgrade)
=== Step 1: System foundations (Organization Independent) ===
=== Seeding Consolidated Permissions System ===
ğŸ”§ Seeding organization permissions...
   Processing category: Main dashboard and overview features
     âœ… Created: dashboard.view
   Processing category: All inventory tracking, adjustments, and stock management
     âœ… Created: inventory.view
     âœ… Created: inventory.edit
     âœ… Created: inventory.adjust
     âœ… Created: inventory.reserve
     âœ… Created: inventory.delete
     âœ… Created: inventory.view_costs
   Processing category: Recipe creation, editing, and production planning
     âœ… Created: recipes.view
     âœ… Created: recipes.create
     âœ… Created: recipes.edit
     âœ… Created: recipes.delete
     âœ… Created: recipes.scale
     âœ… Created: recipes.plan_production
   Processing category: Production batch tracking from start to finish
     âœ… Created: batches.view
     âœ… Created: batches.create
     âœ… Created: batches.edit
     âœ… Created: batches.finish
     âœ… Created: batches.cancel
     âœ… Created: batches.view_costs
   Processing category: Product catalog, SKUs, and sales tracking
     âœ… Created: products.view
     âœ… Created: products.create
     âœ… Created: products.edit
     âœ… Created: products.delete
     âœ… Created: products.manage_variants
     âœ… Created: products.sales_tracking
   Processing category: Organization settings, users, and roles management
     âœ… Created: organization.view
     âœ… Created: organization.edit
     âœ… Created: organization.manage_users
     âœ… Created: organization.manage_roles
     âœ… Created: organization.manage_billing
     âœ… Created: organization.view_audit_logs
   Processing category: Alert management and notification preferences
     âœ… Created: alerts.view
     âœ… Created: alerts.manage
     âœ… Created: alerts.dismiss
   Processing category: Reporting, analytics, and business insights
     âœ… Created: reports.view
     âœ… Created: reports.export
     âœ… Created: reports.advanced
     âœ… Created: reports.custom
   Processing category: Third-party integrations and marketplace connections
     âœ… Created: integrations.shopify
     âœ… Created: integrations.marketplace
     âœ… Created: integrations.api_access
   Processing category: AI-powered features and automation
     âœ… Created: ai.recipe_optimization
     âœ… Created: ai.demand_forecasting
     âœ… Created: ai.quality_insights
âœ… Organization permissions seeded successfully! (Created: 44, Updated: 0)
ğŸ”§ Seeding developer permissions...
   Processing category: Core system administration and management
     âœ… Created: dev.system_admin
     âœ… Created: dev.dashboard
     âœ… Created: dev.debug_mode
     âœ… Created: dev.access_logs
     âœ… Created: dev.system_settings
   Processing category: Database management and migration operations
     âœ… Created: dev.run_migrations
     âœ… Created: dev.seed_data
     âœ… Created: dev.backup_restore
   Processing category: Cross-organization management and oversight
     âœ… Created: dev.all_organizations
     âœ… Created: dev.create_organizations
     âœ… Created: dev.modify_any_organization
     âœ… Created: dev.delete_organizations
   Processing category: Global user and permission management
     âœ… Created: dev.manage_users
     âœ… Created: dev.manage_roles
     âœ… Created: dev.assign_permissions
   Processing category: Subscription tiers and billing oversight
     âœ… Created: dev.manage_tiers
     âœ… Created: dev.billing_override
     âœ… Created: dev.view_all_billing
   Processing category: All organization-level permissions available to developers
     âœ… Created: app.dashboard.view
     âœ… Created: app.inventory.view
     âœ… Created: app.inventory.edit
     âœ… Created: app.inventory.adjust
     âœ… Created: app.inventory.reserve
     âœ… Created: app.inventory.delete
     âœ… Created: app.inventory.view_costs
     âœ… Created: app.recipes.view
     âœ… Created: app.recipes.create
     âœ… Created: app.recipes.edit
     âœ… Created: app.recipes.delete
     âœ… Created: app.recipes.scale
     âœ… Created: app.recipes.plan_production
     âœ… Created: app.batches.view
     âœ… Created: app.batches.create
     âœ… Created: app.batches.edit
     âœ… Created: app.batches.finish
     âœ… Created: app.batches.cancel
     âœ… Created: app.batches.view_costs
     âœ… Created: app.products.view
     âœ… Created: app.products.create
     âœ… Created: app.products.edit
     âœ… Created: app.products.delete
     âœ… Created: app.products.manage_variants
     âœ… Created: app.products.sales_tracking
     âœ… Created: app.organization.view
     âœ… Created: app.organization.edit
     âœ… Created: app.organization.manage_users
     âœ… Created: app.organization.manage_roles
     âœ… Created: app.organization.manage_billing
     âœ… Created: app.organization.view_audit_logs
     âœ… Created: app.alerts.view
     âœ… Created: app.alerts.manage
     âœ… Created: app.alerts.dismiss
     âœ… Created: app.reports.view
     âœ… Created: app.reports.export
     âœ… Created: app.reports.advanced
     âœ… Created: app.reports.custom
     âœ… Created: app.integrations.shopify
     âœ… Created: app.integrations.marketplace
     âœ… Created: app.integrations.api_access
     âœ… Created: app.ai.recipe_optimization
     âœ… Created: app.ai.demand_forecasting
     âœ… Created: app.ai.quality_insights
âœ… Developer permissions seeded successfully! (Created: 62, Updated: 0)
ğŸ”§ Seeding developer roles...
   Current developer roles in DB: 0
âœ… Created/updated system_admin role with 62 permissions
âœ… Created/updated developer role with 7 permissions
âœ… Created/updated support role with 8 permissions
âœ… Developer roles seeded successfully! (Total: 3)
   âœ… system_admin role confirmed (ID: 1)
=== Seeding Organization System Roles ===
âœ… Created organization_owner system role with 0 permissions
âœ… Organization system roles seeded successfully!
âœ… Assigned 0 permissions to fresh organization owner role
âœ… Cleaned up old permissions
âœ… Consolidated permissions system seeded successfully!

ğŸ“Š Summary:
Organization permissions: 44
Developer permissions: 62
âœ… Permissions, organization roles, and developer roles seeded
=== Seeding Complete Subscription System ===
=== Seeding Complete Subscription System ===
âœ… Creating exempt tier
   - Exempt tier created with 44 permissions
âœ… Creating free tier
   - Free tier created with 5 permissions
âœ… Creating solo tier
   - Solo tier created with 39 permissions
âœ… Creating team tier
   - Team tier created with 44 permissions
âœ… Creating enterprise tier
   - Enterprise tier created with 44 permissions
âœ… Subscription tier seeding completed!
âœ… Successfully created/verified: Exempt tier, Free tier, Solo tier, Team tier, Enterprise tier
=== Migrating Organizations to Tier IDs ===
âœ… Organization migration completed! (0 organizations migrated)
âœ… Complete subscription system seeding completed!
   - Tiers processed with error recovery
   - Organizations migrated with error recovery
   - System ready for production use
âœ… Subscription tiers seeded
âœ… Addons seeded
âœ… Add-ons seeded
=== Seeding 61 standard units ===
âœ… Added 61 new units
â„¹ï¸  Total units in database: 61
âœ… Units seeded
=== Step 2: Organization-dependent setup ===
â„¹ï¸  Developer roles should now exist for user assignment...
=== Creating Default Organization with Essential Users ===
â„¹ï¸  No organizations found - creating default organization
âœ… Created default organization: BatchTrack Organization (ID: 1)
â„¹ï¸  Using organization: BatchTrack Organization (ID: 1)
   - Subscription tier: 1 (Exempt Plan)
âœ… Found system_admin developer role (ID: 1)
âœ… Created developer user: dev/dev123 with system_admin role
âœ… Set organization contact_email to: jacobboulette@outlook.com
âœ… Created admin user: admin/admin (organization owner)
âœ… Created manager user: manager/manager123 (no manager role found)
âœ… Created operator user: operator/operator123 (no operator role found)
âœ… Default organization and essential users created successfully
   - Organization: BatchTrack Organization (Exempt tier)
   - 1 System developer (dev/dev123)
   - 3 Organization users (admin, manager, operator)
âœ… Organization and users seeded
=== Step 3: Organization-specific data ===
âœ… Ingredient categories seeded for organization
ğŸ”§ Seeding product categories...
   âœ… Created category: Soaps
   âœ… Created category: Baked Goods
   âœ… Created category: Confectionery
   âœ… Created category: Candles
   âœ… Created category: Cosmetics
   âœ… Created category: Preserves
   âœ… Created category: Beverages
   âœ… Created category: Miscellaneous
   âœ… Created category: Uncategorized
âœ… Product categories seeded successfully! (Created: 9, Updated: 0)
âœ… Product categories seeded
/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
  warnings.warn(

=== Starting Global Inventory Library Seeding ===
ğŸ“‹ Seeding order: Ingredients â†’ Containers â†’ Packaging â†’ Consumables
ğŸ“‹ Processing all available JSON files automatically...
   INGREDIENTS: 21 files - active_ingredients_cosmetics.json, botanicals_whole_parts.json, butters_solid_fats.json, clays.json, colorants_pigments.json, cultures_scobys_fermentation.json, essential_oils.json, extracts_alcohols_solvents.json, flours_powders_organic.json, fragrance_oils.json, fruits_nuts_seeds_whole_chopped.json, herbs_spices_dried_botanicals.json, liquids_aqueous.json, miscellaneous.json, oils_liquid_fats.json, preservatives_additives.json, salts_minerals_crystalline.json, starches_thickeners.json, sugars_syrups.json, surfactants_emulsifiers.json, waxes.json
   CONTAINERS: 6 files - aluminum.json, glass.json, plastic_hdpe.json, plastic_pet.json, tin_steel.json, containers_seed.json
   PACKAGING: 3 files - bags_pouches.json, boxes_cardboard.json, labels_stickers.json
   CONSUMABLES: 2 files - cleaning_materials.json, tools_supplies.json

ğŸ”¹ Step 1: Ingredients (with categories)

=== Seeding Ingredients ===

ğŸ“ Processing ingredient category: Active Ingredients (Cosmetics)
    âœ… Created category: Active Ingredients (Cosmetics)
    ğŸ“¦ Processed 0 items in Active Ingredients (Cosmetics)

ğŸ“ Processing ingredient category: Botanicals (Dried & Whole/Parts)
    âœ… Created category: Botanicals (Dried & Whole/Parts)
    ğŸ“¦ Processed 0 items in Botanicals (Dried & Whole/Parts)

ğŸ“ Processing ingredient category: Butters & Solid Fats
    âœ… Created category: Butters & Solid Fats
      âœ… Created item: Butter
      âœ… Created item: Margarine
      âœ… Created item: Ghee
      âœ… Created item: Coconut Butter
      âœ… Created item: Cocoa Butter
      âœ… Created item: Shea Butter
      âœ… Created item: Mango Butter
    ğŸ“¦ Processed 7 items in Butters & Solid Fats

ğŸ“ Processing ingredient category: Clays
    âœ… Created category: Clays
    ğŸ“¦ Processed 0 items in Clays

ğŸ“ Processing ingredient category: Colorants (Pigments)
    âœ… Created category: Colorants (Pigments)
    ğŸ“¦ Processed 0 items in Colorants (Pigments)

ğŸ“ Processing ingredient category: Yeast & Cultures
    âœ… Created category: Yeast & Cultures
    ğŸ“¦ Processed 0 items in Yeast & Cultures

ğŸ“ Processing ingredient category: Essential Oils
    âœ… Created category: Essential Oils
      âœ… Created item: Lavender Essential Oil
      âœ… Created item: Tea Tree Essential Oil
      âœ… Created item: Peppermint Essential Oil
      âœ… Created item: Eucalyptus Essential Oil
      âœ… Created item: Lemon Essential Oil
      âœ… Created item: Orange Essential Oil
      âœ… Created item: Rosemary Essential Oil
      âœ… Created item: Frankincense Essential Oil
    ğŸ“¦ Processed 8 items in Essential Oils

ğŸ“ Processing ingredient category: Extracts & Alcohols (Solvents)
    âœ… Created category: Extracts & Alcohols (Solvents)
    ğŸ“¦ Processed 0 items in Extracts & Alcohols (Solvents)

ğŸ“ Processing ingredient category: Flours & Powders (Organic)
    âœ… Created category: Flours & Powders (Organic)
      âœ… Created item: All-Purpose Flour
      âœ… Created item: Bread Flour
      âœ… Created item: Cake Flour
      âœ… Created item: Self-Rising Flour
      âœ… Created item: Whole Wheat Flour
      âœ… Created item: Almond Flour
      âœ… Created item: Coconut Flour
      âœ… Created item: Rice Flour
      âœ… Created item: Cocoa Powder
    ğŸ“¦ Processed 9 items in Flours & Powders (Organic)

ğŸ“ Processing ingredient category: Fragrance Oils
    âœ… Created category: Fragrance Oils
    ğŸ“¦ Processed 0 items in Fragrance Oils

ğŸ“ Processing ingredient category: Fruits, Nuts & Seeds (Whole/Chopped)
    âœ… Created category: Fruits, Nuts & Seeds (Whole/Chopped)
    ğŸ“¦ Processed 0 items in Fruits, Nuts & Seeds (Whole/Chopped)

ğŸ“ Processing ingredient category: Herbs & Spices (Dried & Ground)
    âœ… Created category: Herbs & Spices (Dried & Ground)
    ğŸ“¦ Processed 0 items in Herbs & Spices (Dried & Ground)

ğŸ“ Processing ingredient category: Liquids (Aqueous)
    âœ… Created category: Liquids (Aqueous)
      âœ… Created item: Water
      âœ… Created item: Whole Milk
      âœ… Created item: 2% Milk
      âœ… Created item: Skim Milk
      âœ… Created item: Heavy Cream
      âœ… Created item: Light Cream
      âœ… Created item: Half and Half
      âœ… Created item: Witch Hazel
      âœ… Created item: Rose Water
      âœ… Created item: Aloe Vera Gel
    ğŸ“¦ Processed 10 items in Liquids (Aqueous)

ğŸ“ Processing ingredient category: Miscellaneous
    âœ… Created category: Miscellaneous
    ğŸ“¦ Processed 0 items in Miscellaneous

ğŸ“ Processing ingredient category: Oils (Carrier & Fixed)
    âœ… Created category: Oils (Carrier & Fixed)
      âœ… Created item: Olive Oil
      âœ… Created item: Vegetable Oil
      âœ… Created item: Coconut Oil
      âœ… Created item: Avocado Oil
      âœ… Created item: Sunflower Oil
      âœ… Created item: Sesame Oil
      âœ… Created item: Peanut Oil
      âœ… Created item: Corn Oil
      âœ… Created item: Safflower Oil
      âœ… Created item: Grapeseed Oil
      âœ… Created item: Walnut Oil
      âœ… Created item: Almond Oil
      âœ… Created item: Jojoba Oil
      âœ… Created item: Castor Oil
    ğŸ“¦ Processed 14 items in Oils (Carrier & Fixed)

ğŸ“ Processing ingredient category: Preservatives & Additives
    âœ… Created category: Preservatives & Additives
    ğŸ“¦ Processed 0 items in Preservatives & Additives

ğŸ“ Processing ingredient category: Salts & Minerals (Crystalline)
    âœ… Created category: Salts & Minerals (Crystalline)
      âœ… Created item: Table Salt
      âœ… Created item: Sea Salt
      âœ… Created item: Kosher Salt
      âœ… Created item: Himalayan Pink Salt
      âœ… Created item: Epsom Salt
      âœ… Created item: Baking Soda
      âœ… Created item: Baking Powder
      âœ… Created item: Cream of Tartar
    ğŸ“¦ Processed 8 items in Salts & Minerals (Crystalline)

ğŸ“ Processing ingredient category: Starches & Thickeners
    âœ… Created category: Starches & Thickeners
    ğŸ“¦ Processed 0 items in Starches & Thickeners

ğŸ“ Processing ingredient category: Sugars & Syrups
    âœ… Created category: Sugars & Syrups
      âœ… Created item: Honey
      âœ… Created item: Maple Syrup
      âœ… Created item: Corn Syrup
      âœ… Created item: Agave Nectar
      âœ… Created item: Molasses
      âœ… Created item: Golden Syrup
      âœ… Created item: Rice Syrup
      âœ… Created item: White Sugar
      âœ… Created item: Brown Sugar
      âœ… Created item: Powdered Sugar
      âœ… Created item: Raw Sugar
      âœ… Created item: Coconut Sugar
    ğŸ“¦ Processed 12 items in Sugars & Syrups

ğŸ“ Processing ingredient category: Surfactants & Emulsifiers
    âœ… Created category: Surfactants & Emulsifiers
    ğŸ“¦ Processed 0 items in Surfactants & Emulsifiers

ğŸ“ Processing ingredient category: Waxes
    âœ… Created category: Waxes
      âœ… Created item: Beeswax
      âœ… Created item: Soy Wax
      âœ… Created item: Paraffin Wax
      âœ… Created item: Carnauba Wax
    ğŸ“¦ Processed 4 items in Waxes
   âœ… Ingredients: 21 categories, 72 items

ğŸ”¹ Step 2: Containers (with attributes)

=== Seeding Containers ===

ğŸ“ Processing container category: Aluminum Containers
      âœ… Created item: Deep Profile Tin
      âœ… Created item: Shallow Tin
    ğŸ“¦ Processed 2 items in Aluminum Containers

ğŸ“ Processing container category: Glass Containers
      âœ… Created item: Straight Sided Jar
      âœ… Created item: Boston Round Bottle
    ğŸ“¦ Processed 2 items in Glass Containers

ğŸ“ Processing container category: HDPE Plastic Containers
      âœ… Created item: HDPE Wide Mouth Jar
      âœ… Created item: HDPE Cylinder Bottle
    ğŸ“¦ Processed 2 items in HDPE Plastic Containers

ğŸ“ Processing container category: PET Plastic Containers
      âœ… Created item: PET Pump Bottle
      âœ… Created item: PET Squeeze Bottle
    ğŸ“¦ Processed 2 items in PET Plastic Containers

ğŸ“ Processing container category: Tin & Steel Containers
      âœ… Created item: Candle Tin
      âœ… Created item: Travel Tin
    ğŸ“¦ Processed 2 items in Tin & Steel Containers

ğŸ“ Processing container category: Mixed Containers
      â†» Item exists: Straight Sided Jar
      â†» Item exists: Boston Round Bottle
      â†» Item exists: Deep Profile Tin
    ğŸ“¦ Processed 0 items in Mixed Containers
   âœ… Containers: 10 items

ğŸ”¹ Step 3: Packaging

=== Seeding Packaging ===

ğŸ“ Processing packaging category: Bags & Pouches
      âœ… Created item: Stand-Up Pouch
      âœ… Created item: Zipper Bag
    ğŸ“¦ Processed 2 items in Bags & Pouches

ğŸ“ Processing packaging category: Cardboard Packaging
      âœ… Created item: Small Product Box
      âœ… Created item: Gift Box
    ğŸ“¦ Processed 2 items in Cardboard Packaging

ğŸ“ Processing packaging category: Labels & Stickers
      âœ… Created item: Round Label
      âœ… Created item: Rectangle Label
    ğŸ“¦ Processed 2 items in Labels & Stickers
   âœ… Packaging: 6 items

ğŸ”¹ Step 4: Consumables

=== Seeding Consumables ===

ğŸ“ Processing consumables category: Cleaning Materials
      âœ… Created item: Isopropyl Alcohol Wipes
      âœ… Created item: Paper Towels
    ğŸ“¦ Processed 2 items in Cleaning Materials

ğŸ“ Processing consumables category: Tools & Supplies
      âœ… Created item: Disposable Pipettes
      âœ… Created item: Latex Gloves
    ğŸ“¦ Processed 2 items in Tools & Supplies
   âœ… Consumables: 4 items

ğŸ‰ Global Inventory Library Seeding Complete!
ğŸ“Š Summary:
   Categories created: 21
   Items created: 92
ğŸ“‹ Seeding was additive - existing items were preserved
âœ… Global inventory library seeded

ğŸ“Š Detailed Seeding Summary (in creation order):
=== Step 1: System Foundations ===
   ğŸ“‹ Organization Permissions: 44
   ğŸ“‹ Developer Permissions: 62
   ğŸ‘¤ Developer Roles: 3
   ğŸ‘¥ System Roles: 1
   ğŸ’³ Subscription Tiers: 5
   ğŸ”§ Add-ons: 2
   ğŸ“ Units: 61

=== Step 2: Organization-Dependent Setup ===
   ğŸ¢ Organizations: 1
   ğŸ‘¨â€ğŸ’» Total Users: 4
      - Developer Users: 1
      - Customer Users: 3

=== Step 3: Organization-Specific Data ===
   ğŸ§ª Ingredient Categories: 48
   ğŸ“¦ Product Categories: 9
   ğŸŒ Global Inventory Library: 92 total
      - Ingredients: 72
      - Containers: 10
      - Packaging: 6
      - Consumables: 4

âœ… Production seeding complete!
ğŸ”’ Login: admin/admin (CHANGE IMMEDIATELY)
ğŸ“ Note: This command can be run multiple times safely