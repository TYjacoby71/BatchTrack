 -> 4481595c5f02, empty message
~/workspace$ flask db upgrade
/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
  warnings.warn(
Failed to import fifo_bp from blueprints.fifo: No module named 'app.blueprints.fifo'
[2025-08-13 21:15:14,795] INFO in unit_utils: BatchTrack startup
INFO  [alembic.env] Imported model module: app.models.batch
INFO  [alembic.env] Imported model module: app.models.billing_snapshot
INFO  [alembic.env] Imported model module: app.models.category
INFO  [alembic.env] Imported model module: app.models.developer_permission
INFO  [alembic.env] Imported model module: app.models.developer_role
INFO  [alembic.env] Imported model module: app.models.inventory
INFO  [alembic.env] Imported model module: app.models.mixins
INFO  [alembic.env] Imported model module: app.models.models
INFO  [alembic.env] Imported model module: app.models.permission
INFO  [alembic.env] Imported model module: app.models.pricing_snapshot
INFO  [alembic.env] Imported model module: app.models.product
INFO  [alembic.env] Imported model module: app.models.recipe
INFO  [alembic.env] Imported model module: app.models.reservation
INFO  [alembic.env] Imported model module: app.models.role
INFO  [alembic.env] Imported model module: app.models.statistics
INFO  [alembic.env] Imported model module: app.models.stripe_event
INFO  [alembic.env] Imported model module: app.models.subscription_tier
INFO  [alembic.env] Imported model module: app.models.unified_inventory_history
INFO  [alembic.env] Imported model module: app.models.unit
INFO  [alembic.env] Imported model module: app.models.user_preferences
INFO  [alembic.env] Imported model module: app.models.user_role_assignment
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
~/workspace$ flask db migrate
/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
  warnings.warn(
[2025-08-13 21:21:53,056] INFO in unit_utils: BatchTrack startup
INFO  [alembic.env] Imported model module: app.models.batch
INFO  [alembic.env] Imported model module: app.models.billing_snapshot
INFO  [alembic.env] Imported model module: app.models.category
INFO  [alembic.env] Imported model module: app.models.developer_permission
INFO  [alembic.env] Imported model module: app.models.developer_role
INFO  [alembic.env] Imported model module: app.models.inventory
INFO  [alembic.env] Imported model module: app.models.mixins
INFO  [alembic.env] Imported model module: app.models.models
INFO  [alembic.env] Imported model module: app.models.permission
INFO  [alembic.env] Imported model module: app.models.pricing_snapshot
INFO  [alembic.env] Imported model module: app.models.product
INFO  [alembic.env] Imported model module: app.models.recipe
INFO  [alembic.env] Imported model module: app.models.reservation
INFO  [alembic.env] Imported model module: app.models.role
INFO  [alembic.env] Imported model module: app.models.statistics
INFO  [alembic.env] Imported model module: app.models.stripe_event
INFO  [alembic.env] Imported model module: app.models.subscription_tier
INFO  [alembic.env] Imported model module: app.models.unified_inventory_history
INFO  [alembic.env] Imported model module: app.models.unit
INFO  [alembic.env] Imported model module: app.models.user_preferences
INFO  [alembic.env] Imported model module: app.models.user_role_assignment
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
/home/runner/workspace/migrations/env.py:139: SAWarning: Cannot correctly sort tables; there are unresolvable cycles between tables "batch, product_sku", which is usually caused by mutually dependent foreign key constraints.  Foreign key constraints involving these tables will not be considered; this warning may raise an error in a future release.
  context.run_migrations()
INFO  [alembic.autogenerate.compare] Detected removed table '_alembic_tmp_batch_container'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'batch_container.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'batch_inventory_log.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'conversion_log.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'custom_unit_mapping.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'extra_batch_container.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'extra_batch_ingredient.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'ingredient_category.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'inventory_history.change_type'
INFO  [alembic.autogenerate.compare] Detected type change from VARCHAR(length=32) to String(length=50) on 'inventory_history.change_type'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'inventory_history.quantity_change'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'inventory_history.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'inventory_item.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product.organization_id'
INFO  [alembic.autogenerate.compare] Detected added column 'product_sku.id'
INFO  [alembic.autogenerate.compare] Detected added column 'product_sku.sku'
INFO  [alembic.autogenerate.compare] Detected added column 'product_sku.quantity_override'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.inventory_item_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.product_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.variant_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.sku_code'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.unit'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku.organization_id'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_product_sku_inventory_item_id'' on '('inventory_item_id',)'
INFO  [alembic.autogenerate.compare] Detected added unique constraint None on '('sku',)'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_sku_history.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'product_variant.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'recipe.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'recipe_ingredient.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'reservation.organization_id'
INFO  [alembic.autogenerate.compare] Detected removed unique constraint 'uq_stripe_event_event_id' on 'stripe_event'
INFO  [alembic.autogenerate.compare] Detected changed index 'ix_stripe_event_event_id' on 'stripe_event': unique=False to unique=True
INFO  [alembic.autogenerate.compare] Detected NULL on column 'subscription_tier.tier_key'
INFO  [alembic.autogenerate.compare] Detected removed unique constraint 'uq_subscription_tier_tier_key' on 'subscription_tier'
INFO  [alembic.autogenerate.compare] Detected changed index 'ix_subscription_tier_tier_key' on 'subscription_tier': unique=False to unique=True
INFO  [alembic.autogenerate.compare] Detected NULL on column 'tag.organization_id'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unified_inventory_history.remaining_quantity'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unified_inventory_history.quantity_used'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unified_inventory_history.is_perishable'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unified_inventory_history.is_reserved'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unified_inventory_history.organization_id'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_unified_inventory_history_change_type'' on '('change_type',)'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_unified_inventory_history_expiration_date'' on '('expiration_date',)'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_unified_inventory_history_fifo_code'' on '('fifo_code',)'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_unified_inventory_history_inventory_item_id'' on '('inventory_item_id',)'
INFO  [alembic.autogenerate.compare] Detected added index ''ix_unified_inventory_history_timestamp'' on '('timestamp',)'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'unit.symbol'
INFO  [alembic.autogenerate.compare] Detected removed index 'ix_unit_standard_unique' on 'unit'
INFO  [alembic.autogenerate.compare] Detected NULL on column 'user.password_hash'
INFO  [alembic.autogenerate.compare] Detected removed column 'user.is_verified'
  Generating /home/runner/workspace/migrations/versions/57d6ce45a761_.py ...  done
~/workspace$ flask db heads
/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_limiter/extension.py:333: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
  warnings.warn(
[2025-08-13 21:22:31,146] INFO in unit_utils: BatchTrack startup
57d6ce45a761 (head)