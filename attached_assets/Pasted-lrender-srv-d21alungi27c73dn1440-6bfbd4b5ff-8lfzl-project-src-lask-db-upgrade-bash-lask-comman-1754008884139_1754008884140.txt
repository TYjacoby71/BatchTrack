lrender@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ lask db upgrade
bash: lask: command not found
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ flask db upgrade
DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-08-01 00:40:04,658] INFO in unit_utils: BatchTrack startup
INFO  [alembic.env] Imported model module: app.models.batch
INFO  [alembic.env] Imported model module: app.models.billing_snapshot
INFO  [alembic.env] Imported model module: app.models.category
INFO  [alembic.env] Imported model module: app.models.developer_permission
INFO  [alembic.env] Imported model module: app.models.developer_role
INFO  [alembic.env] Imported model module: app.models.inventory
INFO  [alembic.env] Imported model module: app.models.mixins
INFO  [alembic.env] Imported model module: app.models.models
INFO  [alembic.env] Imported model module: app.models.permission
INFO  [alembic.env] Imported model module: app.models.pricing_snapshot
INFO  [alembic.env] Imported model module: app.models.product
INFO  [alembic.env] Imported model module: app.models.recipe
INFO  [alembic.env] Imported model module: app.models.reservation
INFO  [alembic.env] Imported model module: app.models.role
INFO  [alembic.env] Imported model module: app.models.statistics
INFO  [alembic.env] Imported model module: app.models.subscription_tier
INFO  [alembic.env] Imported model module: app.models.unit
INFO  [alembic.env] Imported model module: app.models.user_preferences
INFO  [alembic.env] Imported model module: app.models.user_role_assignment
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade add_missing_timestamps -> fix_nullable_constraints, fix nullable columns and add constraints
=== Fixing nullable columns and adding constraints ===
Updating inventory_item.type NULL values...
Updating user.user_type NULL values...
Updating organization.is_active NULL values...
Updating user.is_active NULL values...
Updating user.is_organization_owner NULL values...
Updating role.is_system_role NULL values...
Updating user_role_assignment.is_active NULL values...
Updating subscription_tier.is_active NULL values...
Updating developer_role.is_active NULL values...
âœ… Migration completed: Updated NULL values to match model expectations
âš ï¸  Note: Columns remain nullable in database schema but models enforce NOT NULL
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ flask sync-schema
DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-08-01 00:40:32,281] INFO in unit_utils: BatchTrack startup
ğŸš€ Syncing database schema to match models (safe mode)...
ğŸ“¦ Dynamically importing all models...
   âœ“ Organization
   âœ“ User
   âœ“ InventoryItem
   âœ“ InventoryHistory
   âœ“ BatchInventoryLog
   âœ“ Recipe
   âœ“ RecipeIngredient
   âœ“ Batch
   âœ“ BatchIngredient
   âœ“ BatchContainer
   âœ“ ExtraBatchContainer
   âœ“ BatchTimer
   âœ“ ExtraBatchIngredient
   âœ“ Unit
   âœ“ CustomUnitMapping
   âœ“ ConversionLog
   âœ“ IngredientCategory
   âœ“ Tag
   âœ“ Product
   âœ“ ProductVariant
   âœ“ ProductSKU
   âœ“ ProductSKUHistory
   âœ“ Reservation
   âœ“ Role
   âœ“ Permission
   âœ“ UserRoleAssignment
   âœ“ UserPreferences
   âœ“ UserStats
   âœ“ OrganizationStats
   âœ“ SubscriptionTier
   âœ“ DeveloperPermission
   âœ“ DeveloperRole
   âœ“ BillingSnapshot
   âœ“ PricingSnapshot
   âœ“ Loaded models from batch.py
   âœ“ Loaded models from billing_snapshot.py
   âœ“ Loaded models from category.py
   âœ“ Loaded models from developer_permission.py
   âœ“ Loaded models from developer_role.py
   âœ“ Loaded models from inventory.py
   âœ“ Loaded models from mixins.py
   âœ“ Loaded models from models.py
   âœ“ Loaded models from permission.py
   âœ“ Loaded models from pricing_snapshot.py
   âœ“ Loaded models from product.py
   âœ“ Loaded models from recipe.py
   âœ“ Loaded models from reservation.py
   âœ“ Loaded models from role.py
   âœ“ Loaded models from statistics.py
   âœ“ Loaded models from subscription_tier.py
   âœ“ Loaded models from unit.py
   âœ“ Loaded models from user_preferences.py
   âœ“ Loaded models from user_role_assignment.py
âœ… 34 models imported dynamically
ğŸ“Š Found 40 existing tables
ğŸ—ï¸  Creating any missing tables...
âœ… No new tables needed
ğŸ”§ Checking for missing columns in existing tables...
   âœ… Table 'user_stats' schema is up to date
   âœ… Table 'organization_stats' schema is up to date
   âš ï¸  No model found for table: billing_snapshot
   âœ… Table 'batch' schema is up to date
   âš ï¸  No model found for table: role_permission
   âœ… Table 'user_role_assignment' schema is up to date
   âœ… Table 'unit' schema is up to date
   âœ… Table 'subscription_tier' schema is up to date
   âš ï¸  No model found for table: alembic_version
   âœ… Table 'recipe' schema is up to date
   âœ… Table 'product' schema is up to date
   âœ… Table 'recipe_ingredient' schema is up to date
   âœ… Table 'extra_batch_ingredient' schema is up to date
   âœ… Table 'role' schema is up to date
   âœ… Table 'reservation' schema is up to date
   âœ… Table 'inventory_history' schema is up to date
   âœ… Table 'inventory_item' schema is up to date
   âœ… Table 'product_variant' schema is up to date
   âœ… Table 'user' schema is up to date
   âœ… Table 'product_sku' schema is up to date
   âœ… Table 'batch_timer' schema is up to date
   âœ… Table 'batch_inventory_log' schema is up to date
   âœ… Table 'tag' schema is up to date
   âœ… Table 'user_preferences' schema is up to date
   âœ… Table 'batch_container' schema is up to date
   âœ… Table 'pricing_snapshots' schema is up to date
   âœ… Table 'billing_snapshots' schema is up to date
   âœ… Table 'extra_batch_container' schema is up to date
   âœ… Table 'batch_ingredient' schema is up to date
   âœ… Table 'custom_unit_mapping' schema is up to date
   âš ï¸  No model found for table: pricing_snapshot
   âš ï¸  No model found for table: developer_role_permission
   âœ… Table 'permission' schema is up to date
   âœ… Table 'developer_permission' schema is up to date
   âœ… Table 'developer_role' schema is up to date
   âœ… Table 'product_sku_history' schema is up to date
   âœ… Table 'organization' schema is up to date
   âš ï¸  No model found for table: subscription_tier_permission
   âœ… Table 'conversion_log' schema is up to date
   âœ… Table 'ingredient_category' schema is up to date
ğŸ“Š Total tables: 40
ğŸ“Š Total columns added: 0
âœ… Database schema safely synced to match models!
ğŸ”„ Note: This only adds missing tables/columns - existing data is preserved
âš ï¸  New columns are added as nullable for safety
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ flask upgrade
DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-08-01 00:40:44,254] INFO in unit_utils: BatchTrack startup
Usage: flask [OPTIONS] COMMAND [ARGS]...
Try 'flask --help' for help.

Error: No such command 'upgrade'.
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ flask sync-schema
DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-08-01 00:40:58,240] INFO in unit_utils: BatchTrack startup
ğŸš€ Syncing database schema to match models (safe mode)...
ğŸ“¦ Dynamically importing all models...
   âœ“ Organization
   âœ“ User
   âœ“ InventoryItem
   âœ“ InventoryHistory
   âœ“ BatchInventoryLog
   âœ“ Recipe
   âœ“ RecipeIngredient
   âœ“ Batch
   âœ“ BatchIngredient
   âœ“ BatchContainer
   âœ“ ExtraBatchContainer
   âœ“ BatchTimer
   âœ“ ExtraBatchIngredient
   âœ“ Unit
   âœ“ CustomUnitMapping
   âœ“ ConversionLog
   âœ“ IngredientCategory
   âœ“ Tag
   âœ“ Product
   âœ“ ProductVariant
   âœ“ ProductSKU
   âœ“ ProductSKUHistory
   âœ“ Reservation
   âœ“ Role
   âœ“ Permission
   âœ“ UserRoleAssignment
   âœ“ UserPreferences
   âœ“ UserStats
   âœ“ OrganizationStats
   âœ“ SubscriptionTier
   âœ“ DeveloperPermission
   âœ“ DeveloperRole
   âœ“ BillingSnapshot
   âœ“ PricingSnapshot
   âœ“ Loaded models from batch.py
   âœ“ Loaded models from billing_snapshot.py
   âœ“ Loaded models from category.py
   âœ“ Loaded models from developer_permission.py
   âœ“ Loaded models from developer_role.py
   âœ“ Loaded models from inventory.py
   âœ“ Loaded models from mixins.py
   âœ“ Loaded models from models.py
   âœ“ Loaded models from permission.py
   âœ“ Loaded models from pricing_snapshot.py
   âœ“ Loaded models from product.py
   âœ“ Loaded models from recipe.py
   âœ“ Loaded models from reservation.py
   âœ“ Loaded models from role.py
   âœ“ Loaded models from statistics.py
   âœ“ Loaded models from subscription_tier.py
   âœ“ Loaded models from unit.py
   âœ“ Loaded models from user_preferences.py
   âœ“ Loaded models from user_role_assignment.py
âœ… 34 models imported dynamically
ğŸ“Š Found 40 existing tables
ğŸ—ï¸  Creating any missing tables...
âœ… No new tables needed
ğŸ”§ Checking for missing columns in existing tables...
   âœ… Table 'product_sku' schema is up to date
   âœ… Table 'subscription_tier' schema is up to date
   âœ… Table 'developer_permission' schema is up to date
   âœ… Table 'batch_inventory_log' schema is up to date
   âš ï¸  No model found for table: billing_snapshot
   âœ… Table 'recipe_ingredient' schema is up to date
   âœ… Table 'reservation' schema is up to date
   âœ… Table 'user_role_assignment' schema is up to date
   âœ… Table 'ingredient_category' schema is up to date
   âœ… Table 'unit' schema is up to date
   âœ… Table 'batch' schema is up to date
   âœ… Table 'inventory_history' schema is up to date
   âœ… Table 'product_variant' schema is up to date
   âœ… Table 'developer_role' schema is up to date
   âœ… Table 'batch_container' schema is up to date
   âœ… Table 'organization' schema is up to date
   âœ… Table 'role' schema is up to date
   âš ï¸  No model found for table: pricing_snapshot
   âœ… Table 'user' schema is up to date
   âœ… Table 'extra_batch_container' schema is up to date
   âš ï¸  No model found for table: developer_role_permission
   âœ… Table 'extra_batch_ingredient' schema is up to date
   âœ… Table 'recipe' schema is up to date
   âœ… Table 'batch_timer' schema is up to date
   âœ… Table 'product_sku_history' schema is up to date
   âœ… Table 'custom_unit_mapping' schema is up to date
   âœ… Table 'billing_snapshots' schema is up to date
   âœ… Table 'organization_stats' schema is up to date
   âš ï¸  No model found for table: subscription_tier_permission
   âš ï¸  No model found for table: alembic_version
   âœ… Table 'inventory_item' schema is up to date
   âœ… Table 'conversion_log' schema is up to date
   âœ… Table 'permission' schema is up to date
   âœ… Table 'user_preferences' schema is up to date
   âœ… Table 'batch_ingredient' schema is up to date
   âœ… Table 'pricing_snapshots' schema is up to date
   âœ… Table 'user_stats' schema is up to date
   âš ï¸  No model found for table: role_permission
   âœ… Table 'tag' schema is up to date
   âœ… Table 'product' schema is up to date
ğŸ“Š Total tables: 40
ğŸ“Š Total columns added: 0
âœ… Database schema safely synced to match models!
ğŸ”„ Note: This only adds missing tables/columns - existing data is preserved
âš ï¸  New columns are added as nullable for safety
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ flask db upgrade
DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-08-01 00:41:06,272] INFO in unit_utils: BatchTrack startup
INFO  [alembic.env] Imported model module: app.models.batch
INFO  [alembic.env] Imported model module: app.models.billing_snapshot
INFO  [alembic.env] Imported model module: app.models.category
INFO  [alembic.env] Imported model module: app.models.developer_permission
INFO  [alembic.env] Imported model module: app.models.developer_role
INFO  [alembic.env] Imported model module: app.models.inventory
INFO  [alembic.env] Imported model module: app.models.mixins
INFO  [alembic.env] Imported model module: app.models.models
INFO  [alembic.env] Imported model module: app.models.permission
INFO  [alembic.env] Imported model module: app.models.pricing_snapshot
INFO  [alembic.env] Imported model module: app.models.product
INFO  [alembic.env] Imported model module: app.models.recipe
INFO  [alembic.env] Imported model module: app.models.reservation
INFO  [alembic.env] Imported model module: app.models.role
INFO  [alembic.env] Imported model module: app.models.statistics
INFO  [alembic.env] Imported model module: app.models.subscription_tier
INFO  [alembic.env] Imported model module: app.models.unit
INFO  [alembic.env] Imported model module: app.models.user_preferences
INFO  [alembic.env] Imported model module: app.models.user_role_assignment
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
render@srv-d21alungi27c73dn1440-6bfbd4b5ff-8lfzl:~/project/src$ 