✅ BatchTrack Delete Button Fix Checklist
🎯 Goal:
❌ Remove delete buttons from view pages

✅ Only allow delete from the edit form

🔒 Variation delete = only from edit page

⚠️ Parent delete = warns it will also delete variations

✅ 1. Edit Form: recipe_form.html
✅ Add This Conditional Block in Place of Your Current Delete Button:
jinja
Copy
Edit
{% if recipe and edit_mode %}
  <form method="post" action="{{ url_for('recipes.delete_recipe', recipe_id=recipe.id) }}" style="display:inline;">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    {% if recipe.parent_id %}
      <button type="submit" class="btn btn-danger"
              onclick="return confirm('Are you sure you want to delete this variation? This action cannot be undone.')">
        Delete Variation
      </button>
    {% elif recipe.variations %}
      <button type="submit" class="btn btn-danger"
              onclick="return confirm('Are you sure you want to delete this recipe and ALL its variations? This action cannot be undone.')">
        Delete Recipe & Variations
      </button>
    {% else %}
      <button type="submit" class="btn btn-danger"
              onclick="return confirm('Are you sure you want to delete this recipe? This action cannot be undone.')">
        Delete Recipe
      </button>
    {% endif %}
  </form>
{% endif %}
✅ 2. Ensure You're Setting edit_mode = True
In your recipes.edit_recipe route, pass:

python
Copy
Edit
return render_template("recipe_form.html", recipe=recipe, edit_mode=True, ...)
✅ This ensures the delete buttons only appear in edit context, not create/view.

✅ 3. View Page: view_recipe.html
❌ Remove All Delete Button Code
Find and delete anything like this:

jinja
Copy
Edit
<form method="post" action="{{ url_for('recipes.delete_recipe', recipe_id=recipe.id) }}">
...
</form>
Also delete:

html
Copy
Edit
<a class="btn btn-danger">Delete</a>
Or anything similar related to deletion.

✅ This guarantees the user can’t delete from view mode.

✅ 4. Server Route: recipes.delete_recipe
Make sure your Flask route:

Checks CSRF

Deletes the recipe

If parent, deletes child variations too (cascading or via query)

🧪 5. Test Cases to Validate

Case	Should Work?
Edit parent → Delete	✅
Edit variation → Delete	✅
View parent → Delete	❌ (no button)
View variation → Delete	❌ (no button)
Deleting parent with variations	✅ Warning shown
