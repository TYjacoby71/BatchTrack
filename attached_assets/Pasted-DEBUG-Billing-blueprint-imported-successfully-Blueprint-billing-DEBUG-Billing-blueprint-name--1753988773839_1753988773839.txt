DEBUG: Billing blueprint imported successfully: <Blueprint 'billing'>
DEBUG: Billing blueprint name: billing
DEBUG: Billing blueprint url_prefix: /billing
DEBUG: Billing blueprint registered successfully
Registered API routes: ['/api/reservations/create', '/api/reservations/release/<int:reservation_id>', '/api/reservations/convert-to-sale/<int:reservation_id>', '/api/reservations/expire-old', '/api/products/<int:product_id>/variants', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/server-time', '/api/server-time', '/api/dismiss-alert', '/api/dashboard-alerts', '/api/check-stock', '/api/categories', '/api/ingredient/<int:id>/density', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/api/api/fifo-details/<int:inventory_id>', '/api/api/batch-inventory-summary/<int:batch_id>', '/api/api/reservations/create', '/api/api/reservations/release/<int:reservation_id>', '/api/api/reservations/convert-to-sale/<int:reservation_id>', '/api/api/reservations/expire-old', '/api/dashboard-alerts', '/api/dismiss-alert', '/api/units', '/api/convert-units']
Container routes found: ['/settings/bulk-update-containers', '/api/debug-containers', '/api/available-containers/<int:recipe_id>', '/api/containers/available', '/api/batches/<int:batch_id>/containers', '/api/batches/<int:batch_id>/containers/<int:container_id>', '/api/batches/<int:batch_id>/containers/<int:container_id>/adjust', '/debug-containers', '/available-containers/<int:recipe_id>', '/containers/available', '/batches/<int:batch_id>/containers', '/batches/<int:batch_id>/containers/<int:container_id>', '/batches/<int:batch_id>/containers/<int:container_id>/adjust']
Billing routes found: ['/billing/reconciliation-needed', '/billing/reconcile-to-free', '/billing/upgrade', '/billing/checkout/<tier>/<billing_cycle>', '/billing/checkout/<tier>', '/billing/customer-portal', '/billing/cancel-subscription', '/billing/webhooks/stripe', '/billing/complete-signup-from-stripe', '/billing/debug']
Billing endpoints: [('/billing/reconciliation-needed', 'billing.reconciliation_needed'), ('/billing/reconcile-to-free', 'billing.reconcile_to_free'), ('/billing/upgrade', 'billing.upgrade'), ('/billing/checkout/<tier>/<billing_cycle>', 'billing.checkout'), ('/billing/checkout/<tier>', 'billing.checkout'), ('/billing/customer-portal', 'billing.customer_portal'), ('/billing/cancel-subscription', 'billing.cancel_subscription'), ('/billing/webhooks/stripe', 'billing.stripe_webhook'), ('/billing/complete-signup-from-stripe', 'billing.complete_signup_from_stripe'), ('/billing/debug', 'billing.debug_billing')]
[2025-07-31 19:05:48,631] INFO in unit_utils: BatchTrack startup
=== MISSING COLUMN CHECK ===

✅ permission has all expected columns
   Existing columns: ['id', 'name', 'description', 'category', 'is_active', 'created_at']

✅ role has all expected columns
   Existing columns: ['id', 'name', 'description', 'is_active', 'is_system_role', 'created_at', 'created_by', 'organization_id']

✅ organization has all expected columns
   Existing columns: ['id', 'name', 'contact_email', 'created_at', 'is_active', 'signup_source', 'promo_code', 'referral_code', 'subscription_tier_id', 'subscription_tier']

✅ inventory_item has all expected columns
   Existing columns: ['id', 'name', 'category_id', 'quantity', 'unit', 'cost_per_unit', 'low_stock_threshold', 'density', 'type', 'is_active', 'is_archived', 'is_perishable', 'shelf_life_days', 'expiration_date', 'storage_amount', 'storage_unit', 'created_by', 'created_at', 'intermediate', 'organization_id']

❌ recipe MISSING: ['base_yield', 'yield_unit', 'notes', 'tags', 'is_active', 'version']
   Existing columns: ['id', 'name', 'instructions', 'label_prefix', 'qr_image', 'parent_id', 'is_locked', 'predicted_yield', 'predicted_yield_unit', 'allowed_containers', 'created_by', 'organization_id']

✅ product_sku has all expected columns
   Existing columns: ['inventory_item_id', 'product_id', 'variant_id', 'size_label', 'sku_code', 'sku_name', 'unit', 'low_stock_threshold', 'fifo_id', 'batch_id', 'container_id', 'retail_price', 'wholesale_price', 'profit_margin_target', 'category', 'subcategory', 'tags', 'description', 'is_active', 'is_product_active', 'is_discontinued', 'created_at', 'updated_at', 'created_by', 'supplier_name', 'supplier_sku', 'supplier_cost', 'weight', 'weight_unit', 'dimensions', 'barcode', 'upc', 'quality_status', 'compliance_status', 'quality_checked_by', 'quality_checked_at', 'location_id', 'location_name', 'temperature_at_time', 'shopify_product_id', 'shopify_variant_id', 'etsy_listing_id', 'amazon_asin', 'marketplace_sync_status', 'marketplace_last_sync', 'expiration_date', 'is_perishable', 'shelf_life_days', 'organization_id']
