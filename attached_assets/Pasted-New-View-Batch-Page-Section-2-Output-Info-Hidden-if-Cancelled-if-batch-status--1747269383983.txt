New View Batch Page 

!-- Section 2: Output Info (Hidden if Cancelled) -->
{% if batch.status != 'cancelled' %}
<div class="batch-output mb-4">
    <h3>Output Details</h3>
    <div class="card">
        <div class="card-body">
            <p><strong>Output Type:</strong> {{ batch.batch_type|title }}</p>

            {% if batch.batch_type == 'product' and batch.product %}
                <p><strong>Product:</strong> <a href="{{ url_for('products.view_product', product_id=batch.product.id) }}">{{ batch.product.name }}</a></p>
                {% if batch.variant %}
                    <p><strong>Variant:</strong> {{ batch.variant }}</p>
                {% endif %}
            {% endif %}

            <p><strong>Projected Yield:</strong> {{ batch.yield_amount }} {{ batch.yield_unit }}</p>
            <p><strong>Final Yield:</strong> {{ batch.final_quantity or 'N/A' }} {{ batch.output_unit or batch.yield_unit }}</p>
            {% if batch.total_cost %}
                <p><strong>Total Cost:</strong> ${{ "%.2f"|format(batch.total_cost) }}</p>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}


working output quantity
    # Get completion details
    output_type = request.form.get('output_type')
    final_quantity = float(request.form.get('final_quantity', 0))
    output_unit = request.form.get('output_unit') or batch.yield_unit

    # Validate required fields
    if not all([output_type, final_quantity > 0]):
        flash("Output type, quantity and unit are required", "error")
        return redirect(url_for('batches.view_batch_in_progress', batch_identifier=batch.id))


you changed this
document.getElementById('finishBatchModalForm');
  if (!modalForm) return;

  const finalQtyInput = modalForm.querySelector('#final_quantity');
  const finalQty = parseFloat(finalQtyInput?.value);
  const isPerishable = document.getElementById('is_perishable').checked;

to this 
document.getElementById('finishBatchModalForm');
  if (!modalForm) return;

  const formData = new FormData(modalForm);
  const finalQtyInput = modalForm.querySelector('#final_quantity');
  const finalQty = parseFloat(finalQtyInput?.value);
  const isPerishable = document.getElementById('is_perishable').checked;

  if (!finalQty || isNaN(finalQty) || finalQty <= 0) {
    alert('Please enter a valid final quantity');
    return;
  }

i think thta changed the form its looking for