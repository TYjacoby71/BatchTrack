Great â€” moving on to âœ… Step 8: Extra Ingredients UI + Functionality Fixes on the Batch In Progress page.

ğŸ¯ Goal
Fix the â€œExtra Ingredients Usedâ€ section so that:

âœ… The button is renamed from â€œAdd Ingredient Rowâ€ â†’ â€œExtra Ingredients Usedâ€

âœ… The initial row is hidden until the button is clicked

âœ… The button moves under each added row

âœ… Each new row has:

ğŸ” A dropdown with searchable ingredient list

ğŸ“ A unit dropdown using inventory units

âŒ A delete (remove) button

ğŸ§  Logic Fix Summary
This will involve 3 things:

âœ… Updating batch_in_progress.html structure

âœ… Connecting inventory_units and all_ingredients in the dropdowns

âœ… Updating the JS to:

Handle row creation

Add the button under each row

Enable delete

âœ… Step-by-Step Fix: batch_in_progress.html
ğŸ”§ PART 1: Replace Extra Ingredient Section
Find and replace your current block:

html
Copy
Edit
<div class="extra-ingredients">
    <h4>Additional Ingredients Used</h4>
    <div id="ingredientInputs">
        <div class="ingredient-row">
            ...
        </div>
    </div>
    <button type="button" onclick="addIngredientRow()" class="button secondary">+ Add Ingredient</button>
</div>
âœ… With This:
html
Copy
Edit
<div class="extra-ingredients mt-4">
  <h4>Extra Ingredients Used</h4>
  <div id="extraIngredientContainer"></div>
  <button type="button" onclick="addExtraIngredientRow()" class="button secondary">+ Extra Ingredients Used</button>
</div>
ğŸ”§ PART 2: Add to the bottom of the page (or inside <script> block)
html
Copy
Edit
<script>
function addExtraIngredientRow() {
  const container = document.getElementById("extraIngredientContainer");

  const row = document.createElement("div");
  row.className = "ingredient-row mb-2 d-flex align-items-center gap-2";

  row.innerHTML = `
    <select name="extra_ingredients[]" class="form-select" required>
      <option value="">Select ingredient</option>
      {% for ing in all_ingredients %}
        <option value="{{ ing.name }}">{{ ing.name }}</option>
      {% endfor %}
    </select>
    <input type="number" name="extra_amounts[]" class="form-control" step="0.01" placeholder="Amount" required>
    <select name="extra_units[]" class="form-select" required>
      <option value="">Select unit</option>
      {% for unit in inventory_units %}
        <option value="{{ unit.name }}">{{ unit.name }}</option>
      {% endfor %}
    </select>
    <button type="button" onclick="this.parentElement.remove()" class="btn btn-danger">âœ•</button>
  `;

  container.appendChild(row);
  row.scrollIntoView({ behavior: "smooth", block: "center" });
}
</script>
âœ… Copy & paste this into batch_in_progress.html, replacing the old block and appending the script.
Let me know once youâ€™ve inserted this and tested it â€” then weâ€™ll move to Step 9: Batch Summary UI Fixes.