Perfect â€” here's your updated version of the batch_in_progress.html template with:

âœ… Additions:
ðŸ“¦ A "Product Yield" note under the Product Quantity field

ðŸ’µ A section that shows:

Total Batch Cost

Total Product Quantity

Final Unit Cost per Product

These values will display dynamically if passed in from your backend (you just need to pass batch_cost, product_quantity, and unit calc).

ðŸ§© Updated Template: batch_in_progress.html
Replace the entire file with this:

html
Copy
Edit
{% extends 'layout.html' %}
{% block content %}
<h2>Batch In Progress</h2>

<div class="batch-details">
    <p><strong>Label Code:</strong> {{ batch.label_code }}</p>
    <p><strong>Recipe:</strong> {{ batch.recipe_name }}</p>
    <p><strong>Scale:</strong> {{ batch.scale }}</p>
    <p><strong>Started:</strong> {{ batch.timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
</div>

<div class="notes-section">
    <h3>Batch Notes</h3>
    <form method="post" action="{{ url_for('batches.update_batch_notes', batch_id=batch.id) }}">
        <textarea name="notes" rows="4" cols="50">{{ batch.notes or '' }}</textarea>
        <button type="submit" class="button secondary">Update Notes</button>
    </form>
</div>

<div class="actions-section">
    <h3>Finish Batch</h3>
    <form method="post" action="{{ url_for('batches.finish_batch', batch_id=batch.id) }}" enctype="multipart/form-data">
    <div class="ingredients-used">
        <h3>Confirm Ingredients Used</h3>
        {% for ingredient in recipe.ingredients %}
        <div class="ingredient-row">
            <input type="hidden" name="ingredient_{{ loop.index0 }}" value="{{ ingredient.name }}">
            <label>{{ ingredient.name }}:</label>
            <input type="number" name="amount_{{ loop.index0 }}" 
                   value="{{ (ingredient.amount * batch.scale) | round(2) }}" step="0.01">
            <input type="hidden" name="unit_{{ loop.index0 }}" value="{{ ingredient.unit }}">
        </div>
        {% endfor %}
        <input type="hidden" name="total_ingredients" value="{{ recipe.ingredients | length }}">
    </div>

    <div class="form-group">
        <label for="product_quantity">Product Quantity:</label>
        <input type="number" name="product_quantity" value="1" min="1" required>
        <small class="form-text text-muted">How much product did your batch yield?</small>
    </div>

    <div class="form-group">
        <label for="product_unit">Product Unit:</label>
        <select name="product_unit" required>
            {% for unit in product_units %}
            <option value="{{ unit.name }}">{{ unit.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="product_image">Product Image:</label>
        <input type="file" name="product_image" accept="image/*">
    </div>

    <div class="form-group">
        <label for="tags">Tags (comma-separated):</label>
        <input type="text" name="tags" value="{{ batch.tags or '' }}">
    </div>

    <div class="extra-ingredients">
        <h4>Additional Ingredients Used</h4>
        <div id="ingredientInputs">
            <div class="ingredient-row">
                <input type="text" name="extra_ingredients[]" placeholder="Ingredient name">
                <input type="number" name="extra_amounts[]" placeholder="Amount" step="0.01">
                <input type="text" name="extra_units[]" placeholder="Unit">
            </div>
        </div>
        <button type="button" onclick="addIngredientRow()" class="button secondary">+ Add Ingredient</button>
    </div>

    <div class="summary-section mt-4">
        <h4>Batch Summary</h4>
        <ul>
            <li><strong>Total Batch Cost:</strong> {{ batch_cost or "â€”" }}</li>
            <li><strong>Product Quantity:</strong> {{ product_quantity or "â€”" }}</li>
            <li><strong>Unit Cost:</strong>
                {% if batch_cost and product_quantity %}
                    ${{ (batch_cost / product_quantity) | round(2) }}
                {% else %}
                    â€”
                {% endif %}
            </li>
        </ul>
    </div>

    <div class="button-group">
        <button type="submit" name="action" value="finish" class="button primary">âœ“ Complete Batch</button>
        <button type="submit" name="action" value="fail" class="button warning">âœ• Mark as Failed</button>
    </div>
    </form>

    <form method="post" action="{{ url_for('batches.cancel_batch', batch_id=batch.id) }}" class="cancel-form">
        <button type="submit" class="button danger">â†© Cancel Batch</button>
    </form>
</div>

<script>
function addIngredientRow() {
    const container = document.getElementById('ingredientInputs');
    const entry = document.createElement('div');
    entry.classList.add('ingredient-row');
    entry.innerHTML = `
        <input type="text" name="extra_ingredients[]" placeholder="Ingredient name">
        <input type="number" name="extra_amounts[]" placeholder="Amount" step="0.01">
        <input type="text" name="extra_units[]" placeholder="Unit">
    `;
    container.appendChild(entry);
}
</script>
{% endblock %}
ðŸ“Œ To Make It Work:
In your view_batch_in_progress() route, pass:

python
Copy
Edit
return render_template('batch_in_progress.html',
                       batch=batch,
                       recipe=recipe,
                       product_units=product_units,
                       batch_cost=calculated_cost,
                       product_quantity=estimated_quantity)
Or default those vars as None and calculate after user submits.