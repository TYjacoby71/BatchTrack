ğŸ§± Full Inventory Model Architecture for BatchMate
This is the complete schema, designed to support:

Raw and intermediate ingredient tracking

Inventory history and audit logs

Recounts, spoilage, trash, and purchases

FIFO support

Vendor and source tracking

Unified inventory system for containers and ingredients

âœ… 1. InventoryItem
ğŸ”¹ Core definition of an item in your inventory

Field	Type	Notes
id	Integer (PK)	
name	String	"Coconut Oil", "Single Egg Batch", etc.
type	Enum/String	"ingredient" or "container"
quantity	Float	Current quantity available
unit	String	"g", "oz", "count", etc.
cost_per_unit	Float	Updated dynamically on purchase
density	Float	Optional, used for conversion
storage_amount	Float	For containers only
storage_unit	String	For containers
low_stock_threshold	Float	Optional alert setting
is_perishable	Boolean	Supports spoilage warnings
category_id	FK â†’ IngredientCategory	Allows density fallback
archived	Boolean	Optional, for soft-deletes

âœ… 2. InventoryHistory
ğŸ”¹ Logs every change to inventory â€” this is the engine for FIFO and traceability

Field	Type	Notes
id	Integer (PK)	
inventory_item_id	FK â†’ InventoryItem	
timestamp	DateTime	
change_type	Enum	"purchase", "use", "spoil", "trash", "recount", "manual"
quantity_change	Float	Positive or negative
unit_cost	Float	Only used for purchases
source	String	"Vendor X", or batch label (e.g., "SE-2025-12")
used_for_batch_id	FK â†’ Batch	If this was used in production
note	Text	Optional user note or system message
created_by	FK â†’ User	For multi-user setups

âœ… This table replaces the need for separate â€œrestock logâ€, â€œspoilage logâ€, etc.

âœ… 3. IngredientCategory
ğŸ”¹ Gives fallback density, soft classification, and filterability

Field	Type	Notes
id	Integer (PK)	
name	String	e.g. â€œOilâ€, â€œPowderâ€, â€œLiquidâ€
default_density	Float	Used if no item-level density

âœ… 4. (Optional) Vendor
ğŸ”¹ If you want vendor recall and cost-per-source tracking

Field	Type	Notes
id	Integer (PK)	
name	String	
contact_info	String	
note	Text	

â†’ Referenced in InventoryHistory.source

âœ… 5. (Optional) RecountEvent
You might also want a separate table just for recounts, but you probably donâ€™t need it if theyâ€™re logged in InventoryHistory with change_type='recount'.

ğŸ”— Summary of How It All Ties Together
Action	Stored In
Add stock (purchase)	InventoryHistory + updates InventoryItem.quantity + adjusts cost_per_unit
Use in a batch	InventoryHistory (with used_for_batch_id)
Spoilage or trash	InventoryHistory with reason
Recount	InventoryHistory with change_type='recount'