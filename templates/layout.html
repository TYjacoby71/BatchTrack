<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BatchTrack</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- Bootstrap CSS and JS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
        function showQuickAddUnitModal() {
            document.getElementById('quickAddUnitModal').style.display = 'block';
        }

        function closeQuickAddUnitModal() {
            document.getElementById('quickAddUnitModal').style.display = 'none';
        }

        async function submitQuickAddUnit(event, targetSelectId) {
            event.preventDefault();
            const name = document.getElementById('newUnitName').value.trim();
            if (!name) {
                alert('Please enter a unit name');
                return false;
            }

            const response = await fetch('/recipes/units/quick-add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name })
            });

            if (response.ok) {
                const newUnit = await response.json();
                const unitSelect = document.getElementById(targetSelectId);
                if (unitSelect) {
                    const newOption = document.createElement('option');
                    newOption.value = newUnit.name;
                    newOption.text = newUnit.name;
                    unitSelect.add(newOption, unitSelect.options[unitSelect.options.length - 1]);
                    unitSelect.value = newUnit.name;
                }

                document.getElementById('newUnitName').value = '';
                closeQuickAddUnitModal();
            } else {
                alert('Failed to add unit');
            }
            return false;
        }
    </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>