
{% extends "layout.html" %}
{% block content %}
<h2>Finish Batch: {{ batch.recipe_name }}</h2>

<form method="POST">
  <label>Batch Type:</label><br>
  <select name="batch_type" required>
    <option value="inventory">Inventory Item</option>
    <option value="product">Final Product</option>
  </select><br><br>

  <label>Was the batch successful?</label><br>
  <input type="radio" name="success" value="yes" required> Yes
  <input type="radio" name="success" value="no"> No<br><br>

  <label>Yield:</label><br>
  <input type="number" step="any" name="yield_qty" required>
  <label>Units:</label>
  <select name="yield_unit" required>
    {% for category in units %}
    <optgroup label="{{ units[category]['label'] }}">
        {% for unit in units[category]['units'] %}
        <option value="{{ unit }}">{{ unit }}</option>
        {% endfor %}
    </optgroup>
    {% endfor %}
  </select><br><br>

  <label>Notes:</label><br>
  <textarea name="notes"></textarea><br><br>

  <label>Label Info:</label><br>
  <textarea name="label_info" placeholder="Enter information for product label"></textarea><br><br>

  <button type="submit">Complete Batch</button>
</form>

<form method="POST" action="/batches/invalidate/{{ batch.id }}" style="margin-top: 2em;">
  <button type="submit" style="color: red;">Mark Batch as Invalid (restores ingredients)</button>
</form>
{% endblock %}
