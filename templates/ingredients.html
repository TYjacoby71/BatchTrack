
{% extends "layout.html" %}
{% block content %}
<h2>🧂 Ingredients</h2>
<form method="post" action="/ingredients/bulk-update">
  <table>
    <tr>
      <th>Delete</th>
      <th>Name</th>
      <th>Current Qty</th>
      <th>Adjust By</th>
      <th>Unit</th>
      <th>Cost/Unit</th>
      <th>Reason</th>
      <th>Edit</th>
    </tr>
    {% for ing in ingredients %}
    <tr>
      <td><input type="checkbox" name="delete" value="{{ ing.name }}"></td>
      <td>{{ ing.name }}</td>
      <td>{{ ing.quantity }}</td>
      <td><input type="number" step="any" name="delta_{{ ing.name }}" value="0"></td>
      <td>{{ ing.unit }}</td>
      <td>{{ ing.cost_per_unit }}</td>
      <td>
        <select name="reason_{{ ing.name }}">
          <option value="Purchase">Purchase</option>
          <option value="Donation">Donation</option>
          <option value="Spoiled">Spoiled</option>
          <option value="Sample">Sample</option>
          <option value="Test Batch">Test Batch</option>
          <option value="Error">Error</option>
          <option value="Sync">Sync</option>
          <option value="Other">Other</option>
        </select>
      </td>
      <td>
        <a href="/edit-ingredient/{{ ing.name }}">✏️ Edit</a>
      </td>
    </tr>
    {% endfor %}
  </table>
  <button type="submit" name="action" value="update">💾 Update Stock</button>
  <button type="submit" name="action" value="delete">🗑 Delete Selected</button>
</form>
{% endblock %}
