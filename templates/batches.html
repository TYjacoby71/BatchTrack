{% extends "layout.html" %}
{% block content %}
<h2>📋 All Batches</h2>
{% if batches %}
<table>
  <tr>
    <th>Recipe</th>
    <th>Timestamp</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>
  {% for batch in batches %}
  <tr>
    <td>{{ batch.recipe_name }}</td>
    <td>{{ batch.timestamp }}</td>
    <td>
      {% if batch.completed %}
        {% if batch.success == 'yes' %}
        ✔ Completed
        {% else %}
        ❌ Failed
        {% endif %}
      {% else %}
        ⏳ In Progress
      {% endif %}
    </td>
    <td>
      {% if not batch.completed %}
      <a href="/batches/finish/{{ loop.index0 }}">Finish</a>
      {% else %}
      —
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
<p>No batches found.</p>
{% endif %}
{% endblock %}