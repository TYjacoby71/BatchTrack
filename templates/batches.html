{% extends "layout.html" %}
{% block content %}
<h2>📋 All Batches</h2>
{% if batches %}
<table>
  <tr>
    <th>Recipe</th>
    <th>Timestamp</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>
  {% for batch in batches %}
  <tr>
    <td>{{ batch.recipe_name }}</td>
    <td><a href="/batches/view/{{ batch.id }}">{{ batch.timestamp }}</a></td>
    <td>
      {% if batch.completed %}
        {% if batch.success == 'yes' %}
        ✔ Completed
        {% else %}
        ❌ Failed
        {% endif %}
      {% else %}
        ⏳ In Progress
      {% endif %}
    </td>
    <td>
      {% if not batch.completed %}
      <a href="/batches/finish/{{ batch.id }}">Finish</a>
      {% endif %}
      <a href="/batches/delete/{{ batch.id }}" onclick="return confirm('Are you sure you want to delete this batch?')" style="margin-left: 10px; color: red;">❌ Delete</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
<p>No batches found.</p>
{% endif %}
{% endblock %}