
{% extends 'layout.html' %}
{% block content %}
<div class="batch-view">
    <h2>Batch Details</h2>
    
    <div class="batch-info">
        <p><strong>Recipe:</strong> {{ batch.recipe.name }}</p>
        <p><strong>Scale:</strong> {{ batch.scale }}</p>
        <p><strong>Status:</strong> {{ "In Progress" if batch.total_cost is none else "Completed" }}</p>
        {% if batch.notes %}
        <p><strong>Notes:</strong> {{ batch.notes }}</p>
        {% endif %}
    </div>

    <div class="ingredients-used">
        <h3>Ingredients Used</h3>
        <table>
            <tr>
                <th>Ingredient</th>
                <th>Amount</th>
                <th>Unit</th>
            </tr>
            {% for assoc in batch.recipe.recipe_ingredients %}
            <tr>
                <td>{{ assoc.ingredient.name }}</td>
                <td>{{ assoc.amount * batch.scale }}</td>
                <td>{{ assoc.unit }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <div class="actions">
        <a href="{{ url_for('batches.batches_list') }}" class="button">Back to Batches</a>
    </div>
</div>
{% endblock %}
