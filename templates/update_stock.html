{% extends "layout.html" %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<h2>📥 Stock Update</h2>
<form method="POST" action="/stock/inventory/update" id="updateForm">
  <table border="1">
    <tr>
      <th>Ingredient</th>
      <th>Current Quantity</th>
      <th>Unit</th>
      <th>Actions</th>
    </tr>
    {% for ingredient in ingredients %}
    <tr>
      <td>{{ ingredient.name }}</td>
      <td>
        <input type="number" step="0.01" name="quantity_{{ ingredient.name }}" value="{{ ingredient.quantity|default(0, true) }}">
      </td>
      <td>{{ ingredient.unit }}</td>
      <td>
        <form action="/stock/zero/{{ ingredient.name }}" method="POST" style="display: inline;">
          <button type="submit" onclick="return confirm('Are you sure you want to zero out this ingredient?')">Zero Out</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
  <button type="submit">Update Stock</button>
</form>

<br>
<a href="/ingredients">← Back to Ingredients</a>
{% endblock %}